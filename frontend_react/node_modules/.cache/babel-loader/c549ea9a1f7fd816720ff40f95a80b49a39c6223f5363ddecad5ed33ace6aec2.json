{"ast":null,"code":"import _regeneratorRuntime from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createClass from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapNativeSuper from \"D:/myportfolio/frontend_react/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nvar _excluded = [\"tag\"];\nimport { getIt } from 'get-it';\nexport { adapter as unstable__adapter, environment as unstable__environment } from 'get-it';\nimport { retry, jsonRequest, jsonResponse, progress, observable } from 'get-it/middleware';\nimport { Observable, lastValueFrom } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\nvar envMiddleware = [];\nvar MAX_ITEMS_IN_ERROR_MESSAGE = 5;\nvar ClientError = /*#__PURE__*/function (_Error) {\n  _inherits(ClientError, _Error);\n  var _super = _createSuper(ClientError);\n  function ClientError(res) {\n    var _this;\n    _classCallCheck(this, ClientError);\n    var props = extractErrorProps(res);\n    _this = _super.call(this, props.message);\n    _this.statusCode = 400;\n    Object.assign(_assertThisInitialized(_this), props);\n    return _this;\n  }\n  return _createClass(ClientError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar ServerError = /*#__PURE__*/function (_Error2) {\n  _inherits(ServerError, _Error2);\n  var _super2 = _createSuper(ServerError);\n  function ServerError(res) {\n    var _this2;\n    _classCallCheck(this, ServerError);\n    var props = extractErrorProps(res);\n    _this2 = _super2.call(this, props.message);\n    _this2.statusCode = 500;\n    Object.assign(_assertThisInitialized(_this2), props);\n    return _this2;\n  }\n  return _createClass(ServerError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res),\n    message: \"\",\n    details: void 0\n  };\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  }\n  if (isMutationError(body)) {\n    var allItems = body.error.items || [];\n    var items = allItems.slice(0, MAX_ITEMS_IN_ERROR_MESSAGE).map(function (item) {\n      var _a;\n      return (_a = item.error) == null ? void 0 : _a.description;\n    }).filter(Boolean);\n    var itemsStr = items.length ? \":\\n- \".concat(items.join(\"\\n- \")) : \"\";\n    if (allItems.length > MAX_ITEMS_IN_ERROR_MESSAGE) {\n      itemsStr += \"\\n...and \".concat(allItems.length - MAX_ITEMS_IN_ERROR_MESSAGE, \" more\");\n    }\n    props.message = \"\".concat(body.error.description).concat(itemsStr);\n    props.details = body.error;\n    return props;\n  }\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  }\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\nfunction isMutationError(body) {\n  return isPlainObject(body) && isPlainObject(body.error) && body.error.type === \"mutationError\" && typeof body.error.description === \"string\";\n}\nfunction isPlainObject(obj) {\n  return typeof obj === \"object\" && obj !== null && !Array.isArray(obj);\n}\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : \"\";\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers[\"content-type\"] || \"\").toLowerCase();\n  var isJson = contentType.indexOf(\"application/json\") !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n    return res;\n  }\n};\nvar printWarnings = {\n  onResponse: function onResponse(res) {\n    var warn = res.headers[\"x-sanity-warning\"];\n    var warnings = Array.isArray(warn) ? warn : [warn];\n    warnings.filter(Boolean).forEach(function (msg) {\n      return console.warn(msg);\n    });\n    return res;\n  }\n};\nfunction defineHttpRequest(envMiddleware, _ref) {\n  var _ref$maxRetries = _ref.maxRetries,\n    maxRetries = _ref$maxRetries === void 0 ? 5 : _ref$maxRetries,\n    retryDelay = _ref.retryDelay;\n  var request = getIt([maxRetries > 0 ? retry({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    retryDelay: retryDelay,\n    // This option is typed incorrectly in get-it.\n    maxRetries: maxRetries,\n    shouldRetry: shouldRetry\n  }) : {}].concat(_toConsumableArray(envMiddleware), [printWarnings, jsonRequest(), jsonResponse(), progress(), httpError, observable({\n    implementation: Observable\n  })]));\n  function httpRequest(options) {\n    var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n    return requester(_objectSpread({\n      maxRedirects: 0\n    }, options));\n  }\n  httpRequest.defaultRequester = request;\n  return httpRequest;\n}\nfunction shouldRetry(err, attempt, options) {\n  var isSafe = options.method === \"GET\" || options.method === \"HEAD\";\n  var uri = options.uri || options.url;\n  var isQuery = uri.startsWith(\"/data/query\");\n  var isRetriableResponse = err.response && (err.response.statusCode === 429 || err.response.statusCode === 502 || err.response.statusCode === 503);\n  if ((isSafe || isQuery) && isRetriableResponse) return true;\n  return retry.shouldRetry(err, attempt, options);\n}\nvar projectHeader = \"X-Sanity-Project-ID\";\nfunction requestOptions(config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n  var withCredentials = Boolean(typeof overrides.withCredentials === \"undefined\" ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === \"undefined\" ? config.timeout : overrides.timeout;\n  return Object.assign({}, overrides, {\n    headers: Object.assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === \"undefined\" ? 5 * 60 * 1e3 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials: withCredentials\n  });\n}\nfunction getSelection(sel) {\n  if (typeof sel === \"string\" || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n  if (typeof sel === \"object\" && sel !== null && \"query\" in sel && typeof sel.query === \"string\") {\n    return \"params\" in sel && typeof sel.params === \"object\" && sel.params !== null ? {\n      query: sel.query,\n      params: sel.params\n    } : {\n      query: sel.query\n    };\n  }\n  var selectionOpts = [\"* Document ID (<docId>)\", \"* Array of document IDs\", \"* Object containing `query`\"].join(\"\\n\");\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n}\nvar VALID_ASSET_TYPES = [\"image\", \"file\"];\nvar VALID_INSERT_LOCATIONS = [\"before\", \"after\", \"replace\"];\nvar dataset = function dataset(name) {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error(\"Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters\");\n  }\n};\nvar projectId = function projectId(id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error(\"`projectId` can only contain only a-z, 0-9 and dashes\");\n  }\n};\nvar validateAssetType = function validateAssetType(type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(\", \")));\n  }\n};\nvar validateObject = function validateObject(op, val) {\n  if (val === null || typeof val !== \"object\" || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\nvar validateDocumentId = function validateDocumentId(op, id) {\n  if (typeof id !== \"string\" || !/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id) || id.includes(\"..\")) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\nvar requireDocumentId = function requireDocumentId(op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n  validateDocumentId(op, doc._id);\n};\nvar validateInsert = function validateInsert(at, selector, items) {\n  var signature = \"insert(at, selector, items)\";\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(\", \");\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n  if (typeof selector !== \"string\") {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\nvar hasDataset = function hasDataset(config) {\n  if (!config.dataset) {\n    throw new Error(\"`dataset` must be provided to perform queries\");\n  }\n  return config.dataset || \"\";\n};\nvar requestTag = function requestTag(tag) {\n  if (typeof tag !== \"string\" || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n  }\n  return tag;\n};\nvar encodeQueryString = function encodeQueryString(_ref2) {\n  var query = _ref2.query,\n    _ref2$params = _ref2.params,\n    params = _ref2$params === void 0 ? {} : _ref2$params,\n    _ref2$options = _ref2.options,\n    options = _ref2$options === void 0 ? {} : _ref2$options;\n  var searchParams = new URLSearchParams();\n  var tag = options.tag,\n    opts = _objectWithoutProperties(options, _excluded);\n  if (tag) searchParams.set(\"tag\", tag);\n  searchParams.set(\"query\", query);\n  for (var _i = 0, _Object$entries = Object.entries(params); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n      key = _Object$entries$_i[0],\n      value = _Object$entries$_i[1];\n    searchParams.set(\"$\".concat(key), JSON.stringify(value));\n  }\n  for (var _i2 = 0, _Object$entries2 = Object.entries(opts); _i2 < _Object$entries2.length; _i2++) {\n    var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n      _key2 = _Object$entries2$_i[0],\n      _value = _Object$entries2$_i[1];\n    if (_value) searchParams.set(_key2, \"\".concat(_value));\n  }\n  return \"?\".concat(searchParams);\n};\nvar __accessCheck$6 = function __accessCheck$6(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$6 = function __privateGet$6(obj, member, getter) {\n  __accessCheck$6(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$6 = function __privateAdd$6(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$6 = function __privateSet$6(obj, member, value, setter) {\n  __accessCheck$6(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$5, _client2$5;\nvar BasePatch = /*#__PURE__*/function () {\n  function BasePatch(selection) {\n    _classCallCheck(this, BasePatch);\n    var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.selection = selection;\n    this.operations = operations;\n  }\n  /**\n   * Sets the given attributes to the document. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */\n  _createClass(BasePatch, [{\n    key: \"set\",\n    value: function set(attrs) {\n      return this._assign(\"set\", attrs);\n    }\n    /**\n     * Sets the given attributes to the document if they are not currently set. Does NOT merge objects.\n     * The operation is added to the current patch, ready to be commited by `commit()`\n     *\n     * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n     */\n  }, {\n    key: \"setIfMissing\",\n    value: function setIfMissing(attrs) {\n      return this._assign(\"setIfMissing\", attrs);\n    }\n    /**\n     * Performs a \"diff-match-patch\" operation on the string attributes provided.\n     * The operation is added to the current patch, ready to be commited by `commit()`\n     *\n     * @param attrs - Attributes to perform operation on. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"dmp\"\\}\n     */\n  }, {\n    key: \"diffMatchPatch\",\n    value: function diffMatchPatch(attrs) {\n      validateObject(\"diffMatchPatch\", attrs);\n      return this._assign(\"diffMatchPatch\", attrs);\n    }\n    /**\n     * Unsets the attribute paths provided.\n     * The operation is added to the current patch, ready to be commited by `commit()`\n     *\n     * @param attrs - Attribute paths to unset.\n     */\n  }, {\n    key: \"unset\",\n    value: function unset(attrs) {\n      if (!Array.isArray(attrs)) {\n        throw new Error(\"unset(attrs) takes an array of attributes to unset, non-array given\");\n      }\n      this.operations = Object.assign({}, this.operations, {\n        unset: attrs\n      });\n      return this;\n    }\n    /**\n     * Increment a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n     *\n     * @param attrs - Object of attribute paths to increment, values representing the number to increment by.\n     */\n  }, {\n    key: \"inc\",\n    value: function inc(attrs) {\n      return this._assign(\"inc\", attrs);\n    }\n    /**\n     * Decrement a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n     *\n     * @param attrs - Object of attribute paths to decrement, values representing the number to decrement by.\n     */\n  }, {\n    key: \"dec\",\n    value: function dec(attrs) {\n      return this._assign(\"dec\", attrs);\n    }\n    /**\n     * Provides methods for modifying arrays, by inserting, appending and replacing elements via a JSONPath expression.\n     *\n     * @param at - Location to insert at, relative to the given selector, or 'replace' the matched path\n     * @param selector - JSONPath expression, eg `comments[-1]` or `blocks[_key==\"abc123\"]`\n     * @param items - Array of items to insert/replace\n     */\n  }, {\n    key: \"insert\",\n    value: function insert(at, selector, items) {\n      var _this$_assign;\n      validateInsert(at, selector, items);\n      return this._assign(\"insert\", (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n    }\n    /**\n     * Append the given items to the array at the given JSONPath\n     *\n     * @param selector - Attribute/path to append to, eg `comments` or `person.hobbies`\n     * @param items - Array of items to append to the array\n     */\n  }, {\n    key: \"append\",\n    value: function append(selector, items) {\n      return this.insert(\"after\", \"\".concat(selector, \"[-1]\"), items);\n    }\n    /**\n     * Prepend the given items to the array at the given JSONPath\n     *\n     * @param selector - Attribute/path to prepend to, eg `comments` or `person.hobbies`\n     * @param items - Array of items to prepend to the array\n     */\n  }, {\n    key: \"prepend\",\n    value: function prepend(selector, items) {\n      return this.insert(\"before\", \"\".concat(selector, \"[0]\"), items);\n    }\n    /**\n     * Change the contents of an array by removing existing elements and/or adding new elements.\n     *\n     * @param selector - Attribute or JSONPath expression for array\n     * @param start - Index at which to start changing the array (with origin 0). If greater than the length of the array, actual starting index will be set to the length of the array. If negative, will begin that many elements from the end of the array (with origin -1) and will be set to 0 if absolute value is greater than the length of the array.x\n     * @param deleteCount - An integer indicating the number of old array elements to remove.\n     * @param items - The elements to add to the array, beginning at the start index. If you don't specify any elements, splice() will only remove elements from the array.\n     */\n  }, {\n    key: \"splice\",\n    value: function splice(selector, start, deleteCount, items) {\n      var delAll = typeof deleteCount === \"undefined\" || deleteCount === -1;\n      var startIndex = start < 0 ? start - 1 : start;\n      var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n      var delRange = startIndex < 0 && delCount >= 0 ? \"\" : delCount;\n      var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n      return this.insert(\"replace\", rangeSelector, items || []);\n    }\n    /**\n     * Adds a revision clause, preventing the document from being patched if the `_rev` property does not match the given value\n     *\n     * @param rev - Revision to lock the patch to\n     */\n  }, {\n    key: \"ifRevisionId\",\n    value: function ifRevisionId(rev) {\n      this.operations.ifRevisionID = rev;\n      return this;\n    }\n    /**\n     * Return a plain JSON representation of the patch\n     */\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return _objectSpread(_objectSpread({}, getSelection(this.selection)), this.operations);\n    }\n    /**\n     * Return a plain JSON representation of the patch\n     */\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.serialize();\n    }\n    /**\n     * Clears the patch of all operations\n     */\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.operations = {};\n      return this;\n    }\n  }, {\n    key: \"_assign\",\n    value: function _assign(op, props) {\n      var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      validateObject(op, props);\n      this.operations = Object.assign({}, this.operations, _defineProperty({}, op, Object.assign({}, merge && this.operations[op] || {}, props)));\n      return this;\n    }\n  }, {\n    key: \"_set\",\n    value: function _set(op, props) {\n      return this._assign(op, props, false);\n    }\n  }]);\n  return BasePatch;\n}();\nvar _ObservablePatch = /*#__PURE__*/function (_BasePatch) {\n  _inherits(_ObservablePatch, _BasePatch);\n  var _super3 = _createSuper(_ObservablePatch);\n  function _ObservablePatch(selection, operations, client) {\n    var _this3;\n    _classCallCheck(this, _ObservablePatch);\n    _this3 = _super3.call(this, selection, operations);\n    __privateAdd$6(_assertThisInitialized(_this3), _client$5, void 0);\n    __privateSet$6(_assertThisInitialized(_this3), _client$5, client);\n    return _this3;\n  }\n  /**\n   * Clones the patch\n   */\n  _createClass(_ObservablePatch, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _ObservablePatch(this.selection, _objectSpread({}, this.operations), __privateGet$6(this, _client$5));\n    }\n  }, {\n    key: \"commit\",\n    value: function commit(options) {\n      if (!__privateGet$6(this, _client$5)) {\n        throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n      }\n      var returnFirst = typeof this.selection === \"string\";\n      var opts = Object.assign({\n        returnFirst: returnFirst,\n        returnDocuments: true\n      }, options);\n      return __privateGet$6(this, _client$5).mutate({\n        patch: this.serialize()\n      }, opts);\n    }\n  }]);\n  return _ObservablePatch;\n}(BasePatch);\nvar ObservablePatch = _ObservablePatch;\n_client$5 = new WeakMap();\nvar _Patch = /*#__PURE__*/function (_BasePatch2) {\n  _inherits(_Patch, _BasePatch2);\n  var _super4 = _createSuper(_Patch);\n  function _Patch(selection, operations, client) {\n    var _this4;\n    _classCallCheck(this, _Patch);\n    _this4 = _super4.call(this, selection, operations);\n    __privateAdd$6(_assertThisInitialized(_this4), _client2$5, void 0);\n    __privateSet$6(_assertThisInitialized(_this4), _client2$5, client);\n    return _this4;\n  }\n  /**\n   * Clones the patch\n   */\n  _createClass(_Patch, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _Patch(this.selection, _objectSpread({}, this.operations), __privateGet$6(this, _client2$5));\n    }\n  }, {\n    key: \"commit\",\n    value: function commit(options) {\n      if (!__privateGet$6(this, _client2$5)) {\n        throw new Error(\"No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method\");\n      }\n      var returnFirst = typeof this.selection === \"string\";\n      var opts = Object.assign({\n        returnFirst: returnFirst,\n        returnDocuments: true\n      }, options);\n      return __privateGet$6(this, _client2$5).mutate({\n        patch: this.serialize()\n      }, opts);\n    }\n  }]);\n  return _Patch;\n}(BasePatch);\nvar Patch = _Patch;\n_client2$5 = new WeakMap();\nvar __accessCheck$5 = function __accessCheck$5(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$5 = function __privateGet$5(obj, member, getter) {\n  __accessCheck$5(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$5 = function __privateAdd$5(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$5 = function __privateSet$5(obj, member, value, setter) {\n  __accessCheck$5(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$4, _client2$4;\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\nvar BaseTransaction = /*#__PURE__*/function () {\n  function BaseTransaction() {\n    _classCallCheck(this, BaseTransaction);\n    var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var transactionId = arguments.length > 1 ? arguments[1] : undefined;\n    this.operations = operations;\n    this.trxId = transactionId;\n  }\n  /**\n   * Creates a new Sanity document. If `_id` is provided and already exists, the mutation will fail. If no `_id` is given, one will automatically be generated by the database.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create. Requires a `_type` property.\n   */\n  _createClass(BaseTransaction, [{\n    key: \"create\",\n    value: function create(doc) {\n      validateObject(\"create\", doc);\n      return this._add({\n        create: doc\n      });\n    }\n    /**\n     * Creates a new Sanity document. If a document with the same `_id` already exists, the create operation will be ignored.\n     * The operation is added to the current transaction, ready to be commited by `commit()`\n     *\n     * @param doc - Document to create if it does not already exist. Requires `_id` and `_type` properties.\n     */\n  }, {\n    key: \"createIfNotExists\",\n    value: function createIfNotExists(doc) {\n      var op = \"createIfNotExists\";\n      validateObject(op, doc);\n      requireDocumentId(op, doc);\n      return this._add(_defineProperty({}, op, doc));\n    }\n    /**\n     * Creates a new Sanity document, or replaces an existing one if the same `_id` is already used.\n     * The operation is added to the current transaction, ready to be commited by `commit()`\n     *\n     * @param doc - Document to create or replace. Requires `_id` and `_type` properties.\n     */\n  }, {\n    key: \"createOrReplace\",\n    value: function createOrReplace(doc) {\n      var op = \"createOrReplace\";\n      validateObject(op, doc);\n      requireDocumentId(op, doc);\n      return this._add(_defineProperty({}, op, doc));\n    }\n    /**\n     * Deletes the document with the given document ID\n     * The operation is added to the current transaction, ready to be commited by `commit()`\n     *\n     * @param documentId - Document ID to delete\n     */\n  }, {\n    key: \"delete\",\n    value: function _delete(documentId) {\n      validateDocumentId(\"delete\", documentId);\n      return this._add({\n        delete: {\n          id: documentId\n        }\n      });\n    }\n  }, {\n    key: \"transactionId\",\n    value: function transactionId(id) {\n      if (!id) {\n        return this.trxId;\n      }\n      this.trxId = id;\n      return this;\n    }\n    /**\n     * Return a plain JSON representation of the transaction\n     */\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return _toConsumableArray(this.operations);\n    }\n    /**\n     * Return a plain JSON representation of the transaction\n     */\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.serialize();\n    }\n    /**\n     * Clears the transaction of all operations\n     */\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.operations = [];\n      return this;\n    }\n  }, {\n    key: \"_add\",\n    value: function _add(mut) {\n      this.operations.push(mut);\n      return this;\n    }\n  }]);\n  return BaseTransaction;\n}();\nvar _Transaction = /*#__PURE__*/function (_BaseTransaction) {\n  _inherits(_Transaction, _BaseTransaction);\n  var _super5 = _createSuper(_Transaction);\n  function _Transaction(operations, client, transactionId) {\n    var _this5;\n    _classCallCheck(this, _Transaction);\n    _this5 = _super5.call(this, operations, transactionId);\n    __privateAdd$5(_assertThisInitialized(_this5), _client$4, void 0);\n    __privateSet$5(_assertThisInitialized(_this5), _client$4, client);\n    return _this5;\n  }\n  /**\n   * Clones the transaction\n   */\n  _createClass(_Transaction, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _Transaction(_toConsumableArray(this.operations), __privateGet$5(this, _client$4), this.trxId);\n    }\n  }, {\n    key: \"commit\",\n    value: function commit(options) {\n      if (!__privateGet$5(this, _client$4)) {\n        throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n      }\n      return __privateGet$5(this, _client$4).mutate(this.serialize(), Object.assign({\n        transactionId: this.trxId\n      }, defaultMutateOptions, options || {}));\n    }\n  }, {\n    key: \"patch\",\n    value: function patch(patchOrDocumentId, patchOps) {\n      var isBuilder = typeof patchOps === \"function\";\n      var isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof Patch;\n      if (isPatch) {\n        return this._add({\n          patch: patchOrDocumentId.serialize()\n        });\n      }\n      if (isBuilder) {\n        var patch = patchOps(new Patch(patchOrDocumentId, {}, __privateGet$5(this, _client$4)));\n        if (!(patch instanceof Patch)) {\n          throw new Error(\"function passed to `patch()` must return the patch\");\n        }\n        return this._add({\n          patch: patch.serialize()\n        });\n      }\n      return this._add({\n        patch: _objectSpread({\n          id: patchOrDocumentId\n        }, patchOps)\n      });\n    }\n  }]);\n  return _Transaction;\n}(BaseTransaction);\nvar Transaction = _Transaction;\n_client$4 = new WeakMap();\nvar _ObservableTransaction = /*#__PURE__*/function (_BaseTransaction2) {\n  _inherits(_ObservableTransaction, _BaseTransaction2);\n  var _super6 = _createSuper(_ObservableTransaction);\n  function _ObservableTransaction(operations, client, transactionId) {\n    var _this6;\n    _classCallCheck(this, _ObservableTransaction);\n    _this6 = _super6.call(this, operations, transactionId);\n    __privateAdd$5(_assertThisInitialized(_this6), _client2$4, void 0);\n    __privateSet$5(_assertThisInitialized(_this6), _client2$4, client);\n    return _this6;\n  }\n  /**\n   * Clones the transaction\n   */\n  _createClass(_ObservableTransaction, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _ObservableTransaction(_toConsumableArray(this.operations), __privateGet$5(this, _client2$4), this.trxId);\n    }\n  }, {\n    key: \"commit\",\n    value: function commit(options) {\n      if (!__privateGet$5(this, _client2$4)) {\n        throw new Error(\"No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method\");\n      }\n      return __privateGet$5(this, _client2$4).mutate(this.serialize(), Object.assign({\n        transactionId: this.trxId\n      }, defaultMutateOptions, options || {}));\n    }\n  }, {\n    key: \"patch\",\n    value: function patch(patchOrDocumentId, patchOps) {\n      var isBuilder = typeof patchOps === \"function\";\n      var isPatch = typeof patchOrDocumentId !== \"string\" && patchOrDocumentId instanceof ObservablePatch;\n      if (isPatch) {\n        return this._add({\n          patch: patchOrDocumentId.serialize()\n        });\n      }\n      if (isBuilder) {\n        var patch = patchOps(new ObservablePatch(patchOrDocumentId, {}, __privateGet$5(this, _client2$4)));\n        if (!(patch instanceof ObservablePatch)) {\n          throw new Error(\"function passed to `patch()` must return the patch\");\n        }\n        return this._add({\n          patch: patch.serialize()\n        });\n      }\n      return this._add({\n        patch: _objectSpread({\n          id: patchOrDocumentId\n        }, patchOps)\n      });\n    }\n  }]);\n  return _ObservableTransaction;\n}(BaseTransaction);\nvar ObservableTransaction = _ObservableTransaction;\n_client2$4 = new WeakMap();\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === \"undefined\" ? defValue : param;\n  return param === false ? void 0 : value;\n};\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    dryRun: options.dryRun,\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || \"sync\",\n    autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n    skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n  };\n};\nvar isResponse = function isResponse(event) {\n  return event.type === \"response\";\n};\nvar getBody = function getBody(event) {\n  return event.body;\n};\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, /* @__PURE__ */Object.create(null));\n};\nvar getQuerySizeLimit = 11264;\nfunction _fetch(client, httpRequest, query, params) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var mapResponse = options.filterResponse === false ? function (res) {\n    return res;\n  } : function (res) {\n    return res.result;\n  };\n  return _dataRequest(client, httpRequest, \"query\", {\n    query: query,\n    params: params\n  }, options).pipe(map(mapResponse));\n}\nfunction _getDocument(client, httpRequest, id) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var options = {\n    uri: _getDataUrl(client, \"doc\", id),\n    json: true,\n    tag: opts.tag\n  };\n  return _requestObservable(client, httpRequest, options).pipe(filter(isResponse), map(function (event) {\n    return event.body.documents && event.body.documents[0];\n  }));\n}\nfunction _getDocuments(client, httpRequest, ids) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var options = {\n    uri: _getDataUrl(client, \"doc\", ids.join(\",\")),\n    json: true,\n    tag: opts.tag\n  };\n  return _requestObservable(client, httpRequest, options).pipe(filter(isResponse), map(function (event) {\n    var indexed = indexBy(event.body.documents || [], function (doc) {\n      return doc._id;\n    });\n    return ids.map(function (id) {\n      return indexed[id] || null;\n    });\n  }));\n}\nfunction _createIfNotExists(client, httpRequest, doc, options) {\n  requireDocumentId(\"createIfNotExists\", doc);\n  return _create(client, httpRequest, doc, \"createIfNotExists\", options);\n}\nfunction _createOrReplace(client, httpRequest, doc, options) {\n  requireDocumentId(\"createOrReplace\", doc);\n  return _create(client, httpRequest, doc, \"createOrReplace\", options);\n}\nfunction _delete2(client, httpRequest, selection, options) {\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: [{\n      delete: getSelection(selection)\n    }]\n  }, options);\n}\nfunction _mutate(client, httpRequest, mutations, options) {\n  var mut;\n  if (mutations instanceof Patch || mutations instanceof ObservablePatch) {\n    mut = {\n      patch: mutations.serialize()\n    };\n  } else if (mutations instanceof Transaction || mutations instanceof ObservableTransaction) {\n    mut = mutations.serialize();\n  } else {\n    mut = mutations;\n  }\n  var muts = Array.isArray(mut) ? mut : [mut];\n  var transactionId = options && options.transactionId || void 0;\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: muts,\n    transactionId: transactionId\n  }, options);\n}\nfunction _dataRequest(client, httpRequest, endpoint, body) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var isMutation = endpoint === \"mutate\";\n  var isQuery = endpoint === \"query\";\n  var strQuery = isMutation ? \"\" : encodeQueryString(body);\n  var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n  var stringQuery = useGet ? strQuery : \"\";\n  var returnFirst = options.returnFirst;\n  var timeout = options.timeout,\n    token = options.token,\n    tag = options.tag,\n    headers = options.headers;\n  var uri = _getDataUrl(client, endpoint, stringQuery);\n  var reqOptions = {\n    method: useGet ? \"GET\" : \"POST\",\n    uri: uri,\n    json: true,\n    body: useGet ? void 0 : body,\n    query: isMutation && getMutationQuery(options),\n    timeout: timeout,\n    headers: headers,\n    token: token,\n    tag: tag,\n    canUseCdn: isQuery,\n    signal: options.signal\n  };\n  return _requestObservable(client, httpRequest, reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n    if (!isMutation) {\n      return res;\n    }\n    var results = res.results || [];\n    if (options.returnDocuments) {\n      return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n        return mut.document;\n      });\n    }\n    var key = returnFirst ? \"documentId\" : \"documentIds\";\n    var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n      return mut.id;\n    });\n    return _defineProperty({\n      transactionId: res.transactionId,\n      results: results\n    }, key, ids);\n  }));\n}\nfunction _create(client, httpRequest, doc, op) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var mutation = _defineProperty({}, op, doc);\n  var opts = Object.assign({\n    returnFirst: true,\n    returnDocuments: true\n  }, options);\n  return _dataRequest(client, httpRequest, \"mutate\", {\n    mutations: [mutation]\n  }, opts);\n}\nfunction _requestObservable(client, httpRequest, options) {\n  var uri = options.url || options.uri;\n  var config = client.config();\n  var canUseCdn = typeof options.canUseCdn === \"undefined\" ? [\"GET\", \"HEAD\"].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/\") === 0 : options.canUseCdn;\n  var useCdn = config.useCdn && canUseCdn;\n  var tag = options.tag && config.requestTagPrefix ? [config.requestTagPrefix, options.tag].join(\".\") : options.tag || config.requestTagPrefix;\n  if (tag) {\n    options.query = _objectSpread({\n      tag: requestTag(tag)\n    }, options.query);\n  }\n  if ([\"GET\", \"HEAD\"].indexOf(options.method || \"GET\") >= 0 && uri.indexOf(\"/data/query/\") === 0) {\n    if (config.resultSourceMap) {\n      options.query = _objectSpread({\n        resultSourceMap: true\n      }, options.query);\n    }\n    if (typeof config.perspective === \"string\" && config.perspective !== \"raw\") {\n      options.query = _objectSpread({\n        perspective: config.perspective\n      }, options.query);\n    }\n  }\n  var reqOptions = requestOptions(config, Object.assign({}, options, {\n    url: _getUrl(client, uri, useCdn)\n  }));\n  var request = new Observable(function (subscriber) {\n    return (\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- the typings thinks it's optional because it's not required to specify it when calling createClient, but it's always defined in practice since SanityClient provides a default\n      httpRequest(reqOptions, config.requester).subscribe(subscriber)\n    );\n  });\n  return options.signal ? request.pipe(_withAbortSignal(options.signal)) : request;\n}\nfunction _request(client, httpRequest, options) {\n  var observable = _requestObservable(client, httpRequest, options).pipe(filter(function (event) {\n    return event.type === \"response\";\n  }), map(function (event) {\n    return event.body;\n  }));\n  return observable;\n}\nfunction _getDataUrl(client, operation, path) {\n  var config = client.config();\n  var catalog = hasDataset(config);\n  var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n  var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n  return \"/data\".concat(uri).replace(/\\/($|\\?)/, \"$1\");\n}\nfunction _getUrl(client, uri) {\n  var canUseCdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var _client$config = client.config(),\n    url = _client$config.url,\n    cdnUrl = _client$config.cdnUrl;\n  var base = canUseCdn ? cdnUrl : url;\n  return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, \"\"));\n}\nfunction _withAbortSignal(signal) {\n  return function (input) {\n    return new Observable(function (observer) {\n      var abort = function abort() {\n        return observer.error(_createAbortError(signal));\n      };\n      if (signal && signal.aborted) {\n        abort();\n        return;\n      }\n      var subscription = input.subscribe(observer);\n      signal.addEventListener(\"abort\", abort);\n      return function () {\n        signal.removeEventListener(\"abort\", abort);\n        subscription.unsubscribe();\n      };\n    });\n  };\n}\nvar isDomExceptionSupported = Boolean(globalThis.DOMException);\nfunction _createAbortError(signal) {\n  var _a, _b;\n  if (isDomExceptionSupported) {\n    return new DOMException((_a = signal == null ? void 0 : signal.reason) != null ? _a : \"The operation was aborted.\", \"AbortError\");\n  }\n  var error = new Error((_b = signal == null ? void 0 : signal.reason) != null ? _b : \"The operation was aborted.\");\n  error.name = \"AbortError\";\n  return error;\n}\nvar __accessCheck$4 = function __accessCheck$4(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$4 = function __privateGet$4(obj, member, getter) {\n  __accessCheck$4(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$4 = function __privateAdd$4(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$4 = function __privateSet$4(obj, member, value, setter) {\n  __accessCheck$4(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$3, _httpRequest$4, _client2$3, _httpRequest2$4;\nvar ObservableAssetsClient = /*#__PURE__*/function () {\n  function ObservableAssetsClient(client, httpRequest) {\n    _classCallCheck(this, ObservableAssetsClient);\n    __privateAdd$4(this, _client$3, void 0);\n    __privateAdd$4(this, _httpRequest$4, void 0);\n    __privateSet$4(this, _client$3, client);\n    __privateSet$4(this, _httpRequest$4, httpRequest);\n  }\n  _createClass(ObservableAssetsClient, [{\n    key: \"upload\",\n    value: function upload(assetType, body, options) {\n      return _upload(__privateGet$4(this, _client$3), __privateGet$4(this, _httpRequest$4), assetType, body, options);\n    }\n  }]);\n  return ObservableAssetsClient;\n}();\n_client$3 = new WeakMap();\n_httpRequest$4 = new WeakMap();\nvar AssetsClient = /*#__PURE__*/function () {\n  function AssetsClient(client, httpRequest) {\n    _classCallCheck(this, AssetsClient);\n    __privateAdd$4(this, _client2$3, void 0);\n    __privateAdd$4(this, _httpRequest2$4, void 0);\n    __privateSet$4(this, _client2$3, client);\n    __privateSet$4(this, _httpRequest2$4, httpRequest);\n  }\n  _createClass(AssetsClient, [{\n    key: \"upload\",\n    value: function upload(assetType, body, options) {\n      var observable = _upload(__privateGet$4(this, _client2$3), __privateGet$4(this, _httpRequest2$4), assetType, body, options);\n      return lastValueFrom(observable.pipe(filter(function (event) {\n        return event.type === \"response\";\n      }), map(function (event) {\n        return event.body.document;\n      })));\n    }\n  }]);\n  return AssetsClient;\n}();\n_client2$3 = new WeakMap();\n_httpRequest2$4 = new WeakMap();\nfunction _upload(client, httpRequest, assetType, body) {\n  var opts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  validateAssetType(assetType);\n  var meta = opts.extract || void 0;\n  if (meta && !meta.length) {\n    meta = [\"none\"];\n  }\n  var dataset = hasDataset(client.config());\n  var assetEndpoint = assetType === \"image\" ? \"images\" : \"files\";\n  var options = optionsFromFile(opts, body);\n  var tag = options.tag,\n    label = options.label,\n    title = options.title,\n    description = options.description,\n    creditLine = options.creditLine,\n    filename = options.filename,\n    source = options.source;\n  var query = {\n    label: label,\n    title: title,\n    description: description,\n    filename: filename,\n    meta: meta,\n    creditLine: creditLine\n  };\n  if (source) {\n    query.sourceId = source.id;\n    query.sourceName = source.name;\n    query.sourceUrl = source.url;\n  }\n  return _requestObservable(client, httpRequest, {\n    tag: tag,\n    method: \"POST\",\n    timeout: options.timeout || 0,\n    uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n    headers: options.contentType ? {\n      \"Content-Type\": options.contentType\n    } : {},\n    query: query,\n    body: body\n  });\n}\nfunction optionsFromFile(opts, file) {\n  if (typeof File === \"undefined\" || !(file instanceof File)) {\n    return opts;\n  }\n  return Object.assign({\n    filename: opts.preserveFilename === false ? void 0 : file.name,\n    contentType: file.type\n  }, opts);\n}\nvar BASE_URL = \"https://www.sanity.io/help/\";\nfunction generateHelpUrl(slug) {\n  return BASE_URL + slug;\n}\nfunction once(fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n}\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return (\n    // eslint-disable-next-line no-console\n    once(function () {\n      var _console;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return (_console = console).warn.apply(_console, [message.join(\" \")].concat(args));\n    })\n  );\n};\nvar printCdnWarning = createWarningPrinter([\"Since you haven't set a value for `useCdn`, we will deliver content using our\", \"global, edge-cached API-CDN. If you wish to have content delivered faster, set\", \"`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API.\"]);\nvar printBrowserTokenWarning = createWarningPrinter([\"You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.\", \"See \".concat(generateHelpUrl(\"js-client-browser-token\"), \" for more information and how to hide this warning.\")]);\nvar printNoApiVersionSpecifiedWarning = createWarningPrinter([\"Using the Sanity client without specifying an API version is deprecated.\", \"See \".concat(generateHelpUrl(\"js-client-api-version\"))]);\nvar printNoDefaultExport = createWarningPrinter([\"The default export of @sanity/client has been deprecated. Use the named export `createClient` instead.\"]);\nvar defaultCdnHost = \"apicdn.sanity.io\";\nvar defaultConfig = {\n  apiHost: \"https://api.sanity.io\",\n  apiVersion: \"1\",\n  useProjectHostname: true\n};\nvar LOCALHOSTS = [\"localhost\", \"127.0.0.1\", \"0.0.0.0\"];\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n};\nvar validateApiVersion = function validateApiVersion2(apiVersion) {\n  if (apiVersion === \"1\" || apiVersion === \"X\") {\n    return;\n  }\n  var apiDate = new Date(apiVersion);\n  var apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n  if (!apiVersionValid) {\n    throw new Error(\"Invalid API version string, expected `1` or date in format `YYYY-MM-DD`\");\n  }\n};\nvar initConfig = function initConfig(config, prevConfig) {\n  var specifiedConfig = Object.assign({}, prevConfig, config);\n  if (!specifiedConfig.apiVersion) {\n    printNoApiVersionSpecifiedWarning();\n  }\n  var newConfig = Object.assign({}, defaultConfig, specifiedConfig);\n  var projectBased = newConfig.useProjectHostname;\n  if (typeof Promise === \"undefined\") {\n    var helpUrl = generateHelpUrl(\"js-client-promise-polyfill\");\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n  if (projectBased && !newConfig.projectId) {\n    throw new Error(\"Configuration must contain `projectId`\");\n  }\n  var isBrowser = typeof window !== \"undefined\" && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    printBrowserTokenWarning();\n  } else if (typeof newConfig.useCdn === \"undefined\") {\n    printCdnWarning();\n  }\n  if (projectBased) {\n    projectId(newConfig.projectId);\n  }\n  if (newConfig.dataset) {\n    dataset(newConfig.dataset);\n  }\n  if (\"requestTagPrefix\" in newConfig) {\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix ? requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, \"\") : void 0;\n  }\n  newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, \"\");\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = newConfig.useCdn !== false && !newConfig.withCredentials;\n  validateApiVersion(newConfig.apiVersion);\n  var hostParts = newConfig.apiHost.split(\"://\", 2);\n  var protocol = hostParts[0];\n  var host = hostParts[1];\n  var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n  if (newConfig.useProjectHostname) {\n    newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n  } else {\n    newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = newConfig.url;\n  }\n  return newConfig;\n};\nvar defaults = function defaults(obj, _defaults) {\n  return Object.keys(_defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === \"undefined\" ? _defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};\nvar pick = function pick(obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === \"undefined\") {\n      return selection;\n    }\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};\nvar MAX_URL_LENGTH = 16e3 - 1200;\nvar possibleOptions = [\"includePreviousRevision\", \"includeResult\", \"visibility\", \"effectFormat\", \"tag\"];\nvar defaultOptions = {\n  includeResult: true\n};\nfunction _listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _this$config = this.config(),\n    url = _this$config.url,\n    token = _this$config.token,\n    withCredentials = _this$config.withCredentials,\n    requestTagPrefix = _this$config.requestTagPrefix;\n  var tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join(\".\") : opts.tag;\n  var options = _objectSpread(_objectSpread({}, defaults(opts, defaultOptions)), {}, {\n    tag: tag\n  });\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: _objectSpread({\n      tag: tag\n    }, listenOpts)\n  });\n  var uri = \"\".concat(url).concat(_getDataUrl(this, \"listen\", qs));\n  if (uri.length > MAX_URL_LENGTH) {\n    return new Observable(function (observer) {\n      return observer.error(new Error(\"Query too large for listener\"));\n    });\n  }\n  var listenFor = options.events ? options.events : [\"mutation\"];\n  var shouldEmitReconnect = listenFor.indexOf(\"reconnect\") !== -1;\n  var esOptions = {};\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n  return new Observable(function (observer) {\n    var es;\n    getEventSource().then(function (eventSource) {\n      es = eventSource;\n    }).catch(function (reason) {\n      observer.error(reason);\n      stop();\n    });\n    var reconnectTimer;\n    var stopped = false;\n    function onError() {\n      if (stopped) {\n        return;\n      }\n      emitReconnect();\n      if (stopped) {\n        return;\n      }\n      if (es.readyState === es.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n    function onDisconnect() {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n    function unsubscribe() {\n      if (!es) return;\n      es.removeEventListener(\"error\", onError);\n      es.removeEventListener(\"channelError\", onChannelError);\n      es.removeEventListener(\"disconnect\", onDisconnect);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage);\n      });\n      es.close();\n    }\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: \"reconnect\"\n        });\n      }\n    }\n    function getEventSource() {\n      return _getEventSource.apply(this, arguments);\n    }\n    function _getEventSource() {\n      _getEventSource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$import, EventSource, evs;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return import('@sanity/eventsource');\n            case 2:\n              _yield$import = _context.sent;\n              EventSource = _yield$import.default;\n              evs = new EventSource(uri, esOptions);\n              evs.addEventListener(\"error\", onError);\n              evs.addEventListener(\"channelError\", onChannelError);\n              evs.addEventListener(\"disconnect\", onDisconnect);\n              listenFor.forEach(function (type) {\n                return evs.addEventListener(type, onMessage);\n              });\n              return _context.abrupt(\"return\", evs);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return _getEventSource.apply(this, arguments);\n    }\n    function open() {\n      getEventSource().then(function (eventSource) {\n        es = eventSource;\n      }).catch(function (reason) {\n        observer.error(reason);\n        stop();\n      });\n    }\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n    return stop;\n  });\n}\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return Object.assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || \"Unknown listener error\";\n  }\n  if (err.error.description) {\n    return err.error.description;\n  }\n  return typeof err.error === \"string\" ? err.error : JSON.stringify(err.error, null, 2);\n}\nvar __accessCheck$3 = function __accessCheck$3(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$3 = function __privateGet$3(obj, member, getter) {\n  __accessCheck$3(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$3 = function __privateAdd$3(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$3 = function __privateSet$3(obj, member, value, setter) {\n  __accessCheck$3(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$2, _httpRequest$3, _client2$2, _httpRequest2$3;\nvar ObservableDatasetsClient = /*#__PURE__*/function () {\n  function ObservableDatasetsClient(client, httpRequest) {\n    _classCallCheck(this, ObservableDatasetsClient);\n    __privateAdd$3(this, _client$2, void 0);\n    __privateAdd$3(this, _httpRequest$3, void 0);\n    __privateSet$3(this, _client$2, client);\n    __privateSet$3(this, _httpRequest$3, httpRequest);\n  }\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  _createClass(ObservableDatasetsClient, [{\n    key: \"create\",\n    value: function create(name, options) {\n      return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PUT\", name, options);\n    }\n    /**\n     * Edit a dataset with the given name\n     *\n     * @param name - Name of the dataset to edit\n     * @param options - New options for the dataset\n     */\n  }, {\n    key: \"edit\",\n    value: function edit(name, options) {\n      return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"PATCH\", name, options);\n    }\n    /**\n     * Delete a dataset with the given name\n     *\n     * @param name - Name of the dataset to delete\n     */\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      return _modify(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), \"DELETE\", name);\n    }\n    /**\n     * Fetch a list of datasets for the configured project\n     */\n  }, {\n    key: \"list\",\n    value: function list() {\n      return _request(__privateGet$3(this, _client$2), __privateGet$3(this, _httpRequest$3), {\n        uri: \"/datasets\"\n      });\n    }\n  }]);\n  return ObservableDatasetsClient;\n}();\n_client$2 = new WeakMap();\n_httpRequest$3 = new WeakMap();\nvar DatasetsClient = /*#__PURE__*/function () {\n  function DatasetsClient(client, httpRequest) {\n    _classCallCheck(this, DatasetsClient);\n    __privateAdd$3(this, _client2$2, void 0);\n    __privateAdd$3(this, _httpRequest2$3, void 0);\n    __privateSet$3(this, _client2$2, client);\n    __privateSet$3(this, _httpRequest2$3, httpRequest);\n  }\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  _createClass(DatasetsClient, [{\n    key: \"create\",\n    value: function create(name, options) {\n      return lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PUT\", name, options));\n    }\n    /**\n     * Edit a dataset with the given name\n     *\n     * @param name - Name of the dataset to edit\n     * @param options - New options for the dataset\n     */\n  }, {\n    key: \"edit\",\n    value: function edit(name, options) {\n      return lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"PATCH\", name, options));\n    }\n    /**\n     * Delete a dataset with the given name\n     *\n     * @param name - Name of the dataset to delete\n     */\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      return lastValueFrom(_modify(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), \"DELETE\", name));\n    }\n    /**\n     * Fetch a list of datasets for the configured project\n     */\n  }, {\n    key: \"list\",\n    value: function list() {\n      return lastValueFrom(_request(__privateGet$3(this, _client2$2), __privateGet$3(this, _httpRequest2$3), {\n        uri: \"/datasets\"\n      }));\n    }\n  }]);\n  return DatasetsClient;\n}();\n_client2$2 = new WeakMap();\n_httpRequest2$3 = new WeakMap();\nfunction _modify(client, httpRequest, method, name, options) {\n  dataset(name);\n  return _request(client, httpRequest, {\n    method: method,\n    uri: \"/datasets/\".concat(name),\n    body: options\n  });\n}\nvar __accessCheck$2 = function __accessCheck$2(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = function __privateGet$2(obj, member, getter) {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = function __privateAdd$2(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = function __privateSet$2(obj, member, value, setter) {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client$1, _httpRequest$2, _client2$1, _httpRequest2$2;\nvar ObservableProjectsClient = /*#__PURE__*/function () {\n  function ObservableProjectsClient(client, httpRequest) {\n    _classCallCheck(this, ObservableProjectsClient);\n    __privateAdd$2(this, _client$1, void 0);\n    __privateAdd$2(this, _httpRequest$2, void 0);\n    __privateSet$2(this, _client$1, client);\n    __privateSet$2(this, _httpRequest$2, httpRequest);\n  }\n  /**\n   * Fetch a list of projects the authenticated user has access to\n   */\n  _createClass(ObservableProjectsClient, [{\n    key: \"list\",\n    value: function list() {\n      return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n        uri: \"/projects\"\n      });\n    }\n    /**\n     * Fetch a project by project ID\n     *\n     * @param projectId - ID of the project to fetch\n     */\n  }, {\n    key: \"getById\",\n    value: function getById(projectId) {\n      return _request(__privateGet$2(this, _client$1), __privateGet$2(this, _httpRequest$2), {\n        uri: \"/projects/\".concat(projectId)\n      });\n    }\n  }]);\n  return ObservableProjectsClient;\n}();\n_client$1 = new WeakMap();\n_httpRequest$2 = new WeakMap();\nvar ProjectsClient = /*#__PURE__*/function () {\n  function ProjectsClient(client, httpRequest) {\n    _classCallCheck(this, ProjectsClient);\n    __privateAdd$2(this, _client2$1, void 0);\n    __privateAdd$2(this, _httpRequest2$2, void 0);\n    __privateSet$2(this, _client2$1, client);\n    __privateSet$2(this, _httpRequest2$2, httpRequest);\n  }\n  /**\n   * Fetch a list of projects the authenticated user has access to\n   */\n  _createClass(ProjectsClient, [{\n    key: \"list\",\n    value: function list() {\n      return lastValueFrom(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n        uri: \"/projects\"\n      }));\n    }\n    /**\n     * Fetch a project by project ID\n     *\n     * @param projectId - ID of the project to fetch\n     */\n  }, {\n    key: \"getById\",\n    value: function getById(projectId) {\n      return lastValueFrom(_request(__privateGet$2(this, _client2$1), __privateGet$2(this, _httpRequest2$2), {\n        uri: \"/projects/\".concat(projectId)\n      }));\n    }\n  }]);\n  return ProjectsClient;\n}();\n_client2$1 = new WeakMap();\n_httpRequest2$2 = new WeakMap();\nvar __accessCheck$1 = function __accessCheck$1(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = function __privateGet$1(obj, member, getter) {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = function __privateAdd$1(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = function __privateSet$1(obj, member, value, setter) {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _client, _httpRequest$1, _client2, _httpRequest2$1;\nvar ObservableUsersClient = /*#__PURE__*/function () {\n  function ObservableUsersClient(client, httpRequest) {\n    _classCallCheck(this, ObservableUsersClient);\n    __privateAdd$1(this, _client, void 0);\n    __privateAdd$1(this, _httpRequest$1, void 0);\n    __privateSet$1(this, _client, client);\n    __privateSet$1(this, _httpRequest$1, httpRequest);\n  }\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  _createClass(ObservableUsersClient, [{\n    key: \"getById\",\n    value: function getById(id) {\n      return _request(__privateGet$1(this, _client), __privateGet$1(this, _httpRequest$1), {\n        uri: \"/users/\".concat(id)\n      });\n    }\n  }]);\n  return ObservableUsersClient;\n}();\n_client = new WeakMap();\n_httpRequest$1 = new WeakMap();\nvar UsersClient = /*#__PURE__*/function () {\n  function UsersClient(client, httpRequest) {\n    _classCallCheck(this, UsersClient);\n    __privateAdd$1(this, _client2, void 0);\n    __privateAdd$1(this, _httpRequest2$1, void 0);\n    __privateSet$1(this, _client2, client);\n    __privateSet$1(this, _httpRequest2$1, httpRequest);\n  }\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  _createClass(UsersClient, [{\n    key: \"getById\",\n    value: function getById(id) {\n      return lastValueFrom(_request(__privateGet$1(this, _client2), __privateGet$1(this, _httpRequest2$1), {\n        uri: \"/users/\".concat(id)\n      }));\n    }\n  }]);\n  return UsersClient;\n}();\n_client2 = new WeakMap();\n_httpRequest2$1 = new WeakMap();\nvar __accessCheck = function __accessCheck(obj, member, msg) {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = function __privateGet(obj, member, getter) {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = function __privateAdd(obj, member, value) {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = function __privateSet(obj, member, value, setter) {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _clientConfig, _httpRequest, _clientConfig2, _httpRequest2;\nvar _ObservableSanityClient = /*#__PURE__*/function () {\n  function _ObservableSanityClient(httpRequest) {\n    _classCallCheck(this, _ObservableSanityClient);\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n    /**\n     * Private properties\n     */\n    __privateAdd(this, _clientConfig, void 0);\n    __privateAdd(this, _httpRequest, void 0);\n    /**\n     * Instance properties\n     */\n    this.listen = _listen;\n    this.config(config);\n    __privateSet(this, _httpRequest, httpRequest);\n    this.assets = new ObservableAssetsClient(this, __privateGet(this, _httpRequest));\n    this.datasets = new ObservableDatasetsClient(this, __privateGet(this, _httpRequest));\n    this.projects = new ObservableProjectsClient(this, __privateGet(this, _httpRequest));\n    this.users = new ObservableUsersClient(this, __privateGet(this, _httpRequest));\n  }\n  /**\n   * Clone the client - returns a new instance\n   */\n  _createClass(_ObservableSanityClient, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _ObservableSanityClient(__privateGet(this, _httpRequest), this.config());\n    }\n  }, {\n    key: \"config\",\n    value: function config(newConfig) {\n      if (newConfig === void 0) {\n        return _objectSpread({}, __privateGet(this, _clientConfig));\n      }\n      if (__privateGet(this, _clientConfig) && __privateGet(this, _clientConfig).allowReconfigure === false) {\n        throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n      }\n      __privateSet(this, _clientConfig, initConfig(newConfig, __privateGet(this, _clientConfig) || {}));\n      return this;\n    }\n    /**\n     * Clone the client with a new (partial) configuration.\n     *\n     * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n     */\n  }, {\n    key: \"withConfig\",\n    value: function withConfig(newConfig) {\n      return new _ObservableSanityClient(__privateGet(this, _httpRequest), _objectSpread(_objectSpread({}, this.config()), newConfig));\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch(query, params) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return _fetch(this, __privateGet(this, _httpRequest), query, params, options);\n    }\n    /**\n     * Fetch a single document with the given ID.\n     *\n     * @param id - Document ID to fetch\n     * @param options - Request options\n     */\n  }, {\n    key: \"getDocument\",\n    value: function getDocument(id, options) {\n      return _getDocument(this, __privateGet(this, _httpRequest), id, options);\n    }\n    /**\n     * Fetch multiple documents in one request.\n     * Should be used sparingly - performing a query is usually a better option.\n     * The order/position of documents is preserved based on the original array of IDs.\n     * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n     *\n     * @param ids - Document IDs to fetch\n     * @param options - Request options\n     */\n  }, {\n    key: \"getDocuments\",\n    value: function getDocuments(ids, options) {\n      return _getDocuments(this, __privateGet(this, _httpRequest), ids, options);\n    }\n  }, {\n    key: \"create\",\n    value: function create(document, options) {\n      return _create(this, __privateGet(this, _httpRequest), document, \"create\", options);\n    }\n  }, {\n    key: \"createIfNotExists\",\n    value: function createIfNotExists(document, options) {\n      return _createIfNotExists(this, __privateGet(this, _httpRequest), document, options);\n    }\n  }, {\n    key: \"createOrReplace\",\n    value: function createOrReplace(document, options) {\n      return _createOrReplace(this, __privateGet(this, _httpRequest), document, options);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(selection, options) {\n      return _delete2(this, __privateGet(this, _httpRequest), selection, options);\n    }\n  }, {\n    key: \"mutate\",\n    value: function mutate(operations, options) {\n      return _mutate(this, __privateGet(this, _httpRequest), operations, options);\n    }\n    /**\n     * Create a new buildable patch of operations to perform\n     *\n     * @param documentId - Document ID(s) to patch\n     * @param operations - Optional object of patch operations to initialize the patch instance with\n     */\n  }, {\n    key: \"patch\",\n    value: function patch(documentId, operations) {\n      return new ObservablePatch(documentId, operations, this);\n    }\n    /**\n     * Create a new transaction of mutations\n     *\n     * @param operations - Optional array of mutation operations to initialize the transaction instance with\n     */\n  }, {\n    key: \"transaction\",\n    value: function transaction(operations) {\n      return new ObservableTransaction(operations, this);\n    }\n    /**\n     * DEPRECATED: Perform an HTTP request against the Sanity API\n     *\n     * @deprecated Use your own request library!\n     * @param options - Request options\n     */\n  }, {\n    key: \"request\",\n    value: function request(options) {\n      return _request(this, __privateGet(this, _httpRequest), options);\n    }\n    /**\n     * Get a Sanity API URL for the URI provided\n     *\n     * @param uri - URI/path to build URL for\n     * @param canUseCdn - Whether or not to allow using the API CDN for this route\n     */\n  }, {\n    key: \"getUrl\",\n    value: function getUrl(uri, canUseCdn) {\n      return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n     * Get a Sanity API URL for the data operation and path provided\n     *\n     * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n     * @param path - Path to append after the operation\n     */\n  }, {\n    key: \"getDataUrl\",\n    value: function getDataUrl(operation, path) {\n      return _getDataUrl(this, operation, path);\n    }\n  }]);\n  return _ObservableSanityClient;\n}();\nvar ObservableSanityClient = _ObservableSanityClient;\n_clientConfig = new WeakMap();\n_httpRequest = new WeakMap();\nvar _SanityClient = /*#__PURE__*/function () {\n  function _SanityClient(httpRequest) {\n    _classCallCheck(this, _SanityClient);\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultConfig;\n    /**\n     * Private properties\n     */\n    __privateAdd(this, _clientConfig2, void 0);\n    __privateAdd(this, _httpRequest2, void 0);\n    /**\n     * Instance properties\n     */\n    this.listen = _listen;\n    this.config(config);\n    __privateSet(this, _httpRequest2, httpRequest);\n    this.assets = new AssetsClient(this, __privateGet(this, _httpRequest2));\n    this.datasets = new DatasetsClient(this, __privateGet(this, _httpRequest2));\n    this.projects = new ProjectsClient(this, __privateGet(this, _httpRequest2));\n    this.users = new UsersClient(this, __privateGet(this, _httpRequest2));\n    this.observable = new ObservableSanityClient(httpRequest, config);\n  }\n  /**\n   * Clone the client - returns a new instance\n   */\n  _createClass(_SanityClient, [{\n    key: \"clone\",\n    value: function clone() {\n      return new _SanityClient(__privateGet(this, _httpRequest2), this.config());\n    }\n  }, {\n    key: \"config\",\n    value: function config(newConfig) {\n      if (newConfig === void 0) {\n        return _objectSpread({}, __privateGet(this, _clientConfig2));\n      }\n      if (__privateGet(this, _clientConfig2) && __privateGet(this, _clientConfig2).allowReconfigure === false) {\n        throw new Error(\"Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client\");\n      }\n      if (this.observable) {\n        this.observable.config(newConfig);\n      }\n      __privateSet(this, _clientConfig2, initConfig(newConfig, __privateGet(this, _clientConfig2) || {}));\n      return this;\n    }\n    /**\n     * Clone the client with a new (partial) configuration.\n     *\n     * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n     */\n  }, {\n    key: \"withConfig\",\n    value: function withConfig(newConfig) {\n      return new _SanityClient(__privateGet(this, _httpRequest2), _objectSpread(_objectSpread({}, this.config()), newConfig));\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch(query, params) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return lastValueFrom(_fetch(this, __privateGet(this, _httpRequest2), query, params, options));\n    }\n    /**\n     * Fetch a single document with the given ID.\n     *\n     * @param id - Document ID to fetch\n     * @param options - Request options\n     */\n  }, {\n    key: \"getDocument\",\n    value: function getDocument(id, options) {\n      return lastValueFrom(_getDocument(this, __privateGet(this, _httpRequest2), id, options));\n    }\n    /**\n     * Fetch multiple documents in one request.\n     * Should be used sparingly - performing a query is usually a better option.\n     * The order/position of documents is preserved based on the original array of IDs.\n     * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n     *\n     * @param ids - Document IDs to fetch\n     * @param options - Request options\n     */\n  }, {\n    key: \"getDocuments\",\n    value: function getDocuments(ids, options) {\n      return lastValueFrom(_getDocuments(this, __privateGet(this, _httpRequest2), ids, options));\n    }\n  }, {\n    key: \"create\",\n    value: function create(document, options) {\n      return lastValueFrom(_create(this, __privateGet(this, _httpRequest2), document, \"create\", options));\n    }\n  }, {\n    key: \"createIfNotExists\",\n    value: function createIfNotExists(document, options) {\n      return lastValueFrom(_createIfNotExists(this, __privateGet(this, _httpRequest2), document, options));\n    }\n  }, {\n    key: \"createOrReplace\",\n    value: function createOrReplace(document, options) {\n      return lastValueFrom(_createOrReplace(this, __privateGet(this, _httpRequest2), document, options));\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(selection, options) {\n      return lastValueFrom(_delete2(this, __privateGet(this, _httpRequest2), selection, options));\n    }\n  }, {\n    key: \"mutate\",\n    value: function mutate(operations, options) {\n      return lastValueFrom(_mutate(this, __privateGet(this, _httpRequest2), operations, options));\n    }\n    /**\n     * Create a new buildable patch of operations to perform\n     *\n     * @param documentId - Document ID(s)to patch\n     * @param operations - Optional object of patch operations to initialize the patch instance with\n     */\n  }, {\n    key: \"patch\",\n    value: function patch(documentId, operations) {\n      return new Patch(documentId, operations, this);\n    }\n    /**\n     * Create a new transaction of mutations\n     *\n     * @param operations - Optional array of mutation operations to initialize the transaction instance with\n     */\n  }, {\n    key: \"transaction\",\n    value: function transaction(operations) {\n      return new Transaction(operations, this);\n    }\n    /**\n     * Perform a request against the Sanity API\n     * NOTE: Only use this for Sanity API endpoints, not for your own APIs!\n     *\n     * @param options - Request options\n     * @returns Promise resolving to the response body\n     */\n  }, {\n    key: \"request\",\n    value: function request(options) {\n      return lastValueFrom(_request(this, __privateGet(this, _httpRequest2), options));\n    }\n    /**\n     * Perform an HTTP request a `/data` sub-endpoint\n     * NOTE: Considered internal, thus marked as deprecated. Use `request` instead.\n     *\n     * @deprecated - Use `request()` or your own HTTP library instead\n     * @param endpoint - Endpoint to hit (mutate, query etc)\n     * @param body - Request body\n     * @param options - Request options\n     * @internal\n     */\n  }, {\n    key: \"dataRequest\",\n    value: function dataRequest(endpoint, body, options) {\n      return lastValueFrom(_dataRequest(this, __privateGet(this, _httpRequest2), endpoint, body, options));\n    }\n    /**\n     * Get a Sanity API URL for the URI provided\n     *\n     * @param uri - URI/path to build URL for\n     * @param canUseCdn - Whether or not to allow using the API CDN for this route\n     */\n  }, {\n    key: \"getUrl\",\n    value: function getUrl(uri, canUseCdn) {\n      return _getUrl(this, uri, canUseCdn);\n    }\n    /**\n     * Get a Sanity API URL for the data operation and path provided\n     *\n     * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n     * @param path - Path to append after the operation\n     */\n  }, {\n    key: \"getDataUrl\",\n    value: function getDataUrl(operation, path) {\n      return _getDataUrl(this, operation, path);\n    }\n  }]);\n  return _SanityClient;\n}();\nvar SanityClient = _SanityClient;\n_clientConfig2 = new WeakMap();\n_httpRequest2 = new WeakMap();\nvar httpRequest = defineHttpRequest(envMiddleware, {});\nvar requester = httpRequest.defaultRequester;\nvar createClient = function createClient(config) {\n  return new SanityClient(defineHttpRequest(envMiddleware, {\n    maxRetries: config.maxRetries,\n    retryDelay: config.retryDelay\n  }), config);\n};\nfunction deprecatedCreateClient(config) {\n  printNoDefaultExport();\n  return new SanityClient(httpRequest, config);\n}\nexport { BasePatch, BaseTransaction, ClientError, ObservablePatch, ObservableSanityClient, ObservableTransaction, Patch, SanityClient, ServerError, Transaction, createClient, deprecatedCreateClient as default, requester };","map":{"version":3,"names":["envMiddleware","MAX_ITEMS_IN_ERROR_MESSAGE","ClientError","_Error","_inherits","_super","_createSuper","res","_this","_classCallCheck","props","extractErrorProps","call","message","statusCode","Object","assign","_assertThisInitialized","_createClass","_wrapNativeSuper","Error","ServerError","_Error2","_super2","_this2","body","response","responseBody","stringifyBody","details","error","concat","isMutationError","allItems","items","slice","map","item","_a","description","filter","Boolean","itemsStr","length","join","httpErrorMessage","isPlainObject","type","obj","Array","isArray","statusMessage","method","url","contentType","headers","toLowerCase","isJson","indexOf","JSON","stringify","httpError","onResponse","printWarnings","warn","warnings","forEach","msg","console","defineHttpRequest","_ref","_ref$maxRetries","maxRetries","retryDelay","request","getIt","retry","shouldRetry","_toConsumableArray","jsonRequest","jsonResponse","progress","observable","implementation","Observable","httpRequest","options","requester","arguments","undefined","_objectSpread","maxRedirects","defaultRequester","err","attempt","isSafe","uri","isQuery","startsWith","isRetriableResponse","projectHeader","requestOptions","config","overrides","token","Authorization","useGlobalApi","useProjectHostname","projectId","withCredentials","timeout","proxy","json","getSelection","sel","id","query","params","selectionOpts","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","dataset","name","test","validateAssetType","validateObject","op","val","validateDocumentId","includes","requireDocumentId","doc","_id","validateInsert","at","selector","signature","valid","loc","hasDataset","requestTag","tag","encodeQueryString","_ref2","_ref2$params","_ref2$options","searchParams","URLSearchParams","opts","_objectWithoutProperties","_excluded","set","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","key","value","_i2","_Object$entries2","_Object$entries2$_i","_client$5","_client2$5","BasePatch","selection","operations","attrs","_assign","setIfMissing","diffMatchPatch","unset","inc","dec","insert","_this$_assign","_defineProperty","append","prepend","splice","start","deleteCount","delAll","startIndex","delCount","Math","max","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","serialize","toJSON","reset","merge","_set","_ObservablePatch","_BasePatch","_super3","client","_this3","__privateAdd$6","__privateSet$6","clone","__privateGet$6","commit","returnFirst","returnDocuments","mutate","patch","ObservablePatch","WeakMap","_Patch","_BasePatch2","_super4","_this4","Patch","_client$4","_client2$4","defaultMutateOptions","BaseTransaction","transactionId","trxId","create","_add","createIfNotExists","createOrReplace","_delete","documentId","delete","mut","push","_Transaction","_BaseTransaction","_super5","_this5","__privateAdd$5","__privateSet$5","__privateGet$5","patchOrDocumentId","patchOps","isBuilder","isPatch","Transaction","_ObservableTransaction","_BaseTransaction2","_super6","_this6","ObservableTransaction","excludeFalsey","param","defValue","getMutationQuery","dryRun","returnIds","visibility","autoGenerateArrayKeys","skipCrossDatasetReferenceValidation","isResponse","event","getBody","indexBy","docs","attr","reduce","indexed","getQuerySizeLimit","_fetch","mapResponse","filterResponse","result","_dataRequest","pipe","_getDocument","_getDataUrl","_requestObservable","documents","_getDocuments","ids","_createIfNotExists","_create","_createOrReplace","mutations","_mutate","muts","endpoint","isMutation","strQuery","useGet","stringQuery","reqOptions","canUseCdn","signal","results","document","mutation","useCdn","requestTagPrefix","resultSourceMap","perspective","_getUrl","subscriber","subscribe","_withAbortSignal","_request","operation","path","catalog","baseUri","replace","_client$config","cdnUrl","base","input","observer","abort","_createAbortError","aborted","subscription","addEventListener","removeEventListener","unsubscribe","isDomExceptionSupported","globalThis","DOMException","_b","reason","_client$3","_httpRequest$4","_client2$3","_httpRequest2$4","ObservableAssetsClient","__privateAdd$4","__privateSet$4","upload","assetType","_upload","__privateGet$4","AssetsClient","lastValueFrom","meta","extract","assetEndpoint","optionsFromFile","label","title","creditLine","filename","source","sourceId","sourceName","sourceUrl","file","File","preserveFilename","BASE_URL","generateHelpUrl","slug","once","fn","didCall","returnValue","apply","createWarningPrinter","_console","_len","args","_key","printCdnWarning","printBrowserTokenWarning","printNoApiVersionSpecifiedWarning","printNoDefaultExport","defaultCdnHost","defaultConfig","apiHost","apiVersion","LOCALHOSTS","isLocal","host","validateApiVersion","validateApiVersion2","apiDate","Date","apiVersionValid","getTime","initConfig","prevConfig","specifiedConfig","newConfig","projectBased","Promise","helpUrl","isBrowser","window","location","hostname","isLocalhost","ignoreBrowserTokenWarning","isDefaultApi","hostParts","split","protocol","cdnHost","defaults","keys","target","prop","pick","MAX_URL_LENGTH","possibleOptions","defaultOptions","includeResult","_listen","_this$config","listenOpts","qs","listenFor","events","shouldEmitReconnect","esOptions","es","getEventSource","then","eventSource","catch","stop","reconnectTimer","stopped","onError","emitReconnect","readyState","CLOSED","clearTimeout","setTimeout","open","onChannelError","cooerceError","onMessage","evt","parseEvent","next","onDisconnect","complete","close","_getEventSource","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$import","EventSource","evs","wrap","_callee$","_context","prev","sent","default","abrupt","data","parse","extractErrorMessage","_client$2","_httpRequest$3","_client2$2","_httpRequest2$3","ObservableDatasetsClient","__privateAdd$3","__privateSet$3","_modify","__privateGet$3","edit","list","DatasetsClient","_client$1","_httpRequest$2","_client2$1","_httpRequest2$2","ObservableProjectsClient","__privateAdd$2","__privateSet$2","__privateGet$2","getById","ProjectsClient","_client","_httpRequest$1","_client2","_httpRequest2$1","ObservableUsersClient","__privateAdd$1","__privateSet$1","__privateGet$1","UsersClient","_clientConfig","_httpRequest","_clientConfig2","_httpRequest2","_ObservableSanityClient","__privateAdd","listen","__privateSet","assets","__privateGet","datasets","projects","users","allowReconfigure","withConfig","fetch","getDocument","getDocuments","transaction","getUrl","getDataUrl","ObservableSanityClient","_SanityClient","dataRequest","SanityClient","createClient","deprecatedCreateClient"],"sources":["D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\http\\browserMiddleware.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\http\\errors.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\http\\request.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\http\\requestOptions.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\util\\getSelection.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\validators.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\data\\encodeQueryString.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\data\\patch.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\data\\transaction.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\data\\dataMethods.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\assets\\AssetsClient.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\generateHelpUrl.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\util\\once.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\warnings.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\config.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\util\\defaults.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\util\\pick.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\data\\listen.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\datasets\\DatasetsClient.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\projects\\ProjectsClient.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\users\\UsersClient.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\SanityClient.ts","D:\\myportfolio\\frontend_react\\node_modules\\@sanity\\client\\src\\index.browser.ts"],"sourcesContent":["export default []\n","import type {Any, ErrorProps, MutationError} from '../types'\n\nconst MAX_ITEMS_IN_ERROR_MESSAGE = 5\n\n/** @public */\nexport class ClientError extends Error {\n  response: ErrorProps['response']\n  statusCode: ErrorProps['statusCode'] = 400\n  responseBody: ErrorProps['responseBody']\n  details: ErrorProps['details']\n\n  constructor(res: Any) {\n    const props = extractErrorProps(res)\n    super(props.message)\n    Object.assign(this, props)\n  }\n}\n\n/** @public */\nexport class ServerError extends Error {\n  response: ErrorProps['response']\n  statusCode: ErrorProps['statusCode'] = 500\n  responseBody: ErrorProps['responseBody']\n  details: ErrorProps['details']\n\n  constructor(res: Any) {\n    const props = extractErrorProps(res)\n    super(props.message)\n    Object.assign(this, props)\n  }\n}\n\nfunction extractErrorProps(res: Any): ErrorProps {\n  const body = res.body\n  const props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res),\n    message: '',\n    details: undefined as Any,\n  }\n\n  // API/Boom style errors ({statusCode, error, message})\n  if (body.error && body.message) {\n    props.message = `${body.error} - ${body.message}`\n    return props\n  }\n\n  // Mutation errors (specifically)\n  if (isMutationError(body)) {\n    const allItems = body.error.items || []\n    const items = allItems\n      .slice(0, MAX_ITEMS_IN_ERROR_MESSAGE)\n      .map((item) => item.error?.description)\n      .filter(Boolean)\n    let itemsStr = items.length ? `:\\n- ${items.join('\\n- ')}` : ''\n    if (allItems.length > MAX_ITEMS_IN_ERROR_MESSAGE) {\n      itemsStr += `\\n...and ${allItems.length - MAX_ITEMS_IN_ERROR_MESSAGE} more`\n    }\n    props.message = `${body.error.description}${itemsStr}`\n    props.details = body.error\n    return props\n  }\n\n  // Query/database errors ({error: {description, other, arb, props}})\n  if (body.error && body.error.description) {\n    props.message = body.error.description\n    props.details = body.error\n    return props\n  }\n\n  // Other, more arbitrary errors\n  props.message = body.error || body.message || httpErrorMessage(res)\n  return props\n}\n\nfunction isMutationError(body: Any): body is MutationError {\n  return (\n    isPlainObject(body) &&\n    isPlainObject(body.error) &&\n    body.error.type === 'mutationError' &&\n    typeof body.error.description === 'string'\n  )\n}\n\nfunction isPlainObject(obj: Any): obj is Record<string, unknown> {\n  return typeof obj === 'object' && obj !== null && !Array.isArray(obj)\n}\n\nfunction httpErrorMessage(res: Any) {\n  const statusMessage = res.statusMessage ? ` ${res.statusMessage}` : ''\n  return `${res.method}-request to ${res.url} resulted in HTTP ${res.statusCode}${statusMessage}`\n}\n\nfunction stringifyBody(body: Any, res: Any) {\n  const contentType = (res.headers['content-type'] || '').toLowerCase()\n  const isJson = contentType.indexOf('application/json') !== -1\n  return isJson ? JSON.stringify(body, null, 2) : body\n}\n","import {getIt, type Middlewares} from 'get-it'\nimport {jsonRequest, jsonResponse, observable, progress, retry} from 'get-it/middleware'\nimport {Observable} from 'rxjs'\n\nimport type {Any, HttpRequest, RequestOptions} from '../types'\nimport {ClientError, ServerError} from './errors'\n\nconst httpError = {\n  onResponse: (res: Any) => {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res)\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res)\n    }\n\n    return res\n  },\n}\n\nconst printWarnings = {\n  onResponse: (res: Any) => {\n    const warn = res.headers['x-sanity-warning']\n    const warnings = Array.isArray(warn) ? warn : [warn]\n    warnings.filter(Boolean).forEach((msg) => console.warn(msg)) // eslint-disable-line no-console\n    return res\n  },\n}\n\n/** @internal */\nexport function defineHttpRequest(\n  envMiddleware: Middlewares,\n  {\n    maxRetries = 5,\n    retryDelay,\n  }: {maxRetries?: number; retryDelay?: (attemptNumber: number) => number}\n): HttpRequest {\n  const request = getIt([\n    maxRetries > 0\n      ? retry({\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          retryDelay: retryDelay as any, // This option is typed incorrectly in get-it.\n          maxRetries,\n          shouldRetry,\n        })\n      : {},\n    ...envMiddleware,\n    printWarnings,\n    jsonRequest(),\n    jsonResponse(),\n    progress(),\n    httpError,\n    observable({implementation: Observable}),\n  ])\n\n  function httpRequest(options: RequestOptions, requester = request) {\n    return requester({maxRedirects: 0, ...options} as Any)\n  }\n\n  httpRequest.defaultRequester = request\n\n  return httpRequest\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction shouldRetry(err: any, attempt: number, options: any) {\n  // By default `retry.shouldRetry` doesn't retry on server errors so we add our own logic.\n\n  const isSafe = options.method === 'GET' || options.method === 'HEAD'\n  const uri = options.uri || options.url\n  const isQuery = uri.startsWith('/data/query')\n  const isRetriableResponse =\n    err.response &&\n    (err.response.statusCode === 429 ||\n      err.response.statusCode === 502 ||\n      err.response.statusCode === 503)\n\n  // We retry the following errors:\n  // - 429 means that the request was rate limited. It's a bit difficult\n  //   to know exactly how long it makes sense to wait and/or how many\n  //   attempts we should retry, but the backoff should alleviate the\n  //   additional load.\n  // - 502/503 can occur when certain components struggle to talk to their\n  //   upstream dependencies. This is most likely a temporary problem\n  //   and retrying makes sense.\n\n  if ((isSafe || isQuery) && isRetriableResponse) return true\n\n  return retry.shouldRetry(err, attempt, options)\n}\n","import type {RequestOptions} from 'get-it'\n\nimport type {Any} from '../types'\n\nconst projectHeader = 'X-Sanity-Project-ID'\n\nexport function requestOptions(config: Any, overrides: Any = {}): Omit<RequestOptions, 'url'> {\n  const headers: Any = {}\n\n  const token = overrides.token || config.token\n  if (token) {\n    headers.Authorization = `Bearer ${token}`\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId\n  }\n\n  const withCredentials = Boolean(\n    typeof overrides.withCredentials === 'undefined'\n      ? config.token || config.withCredentials\n      : overrides.withCredentials\n  )\n\n  const timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout\n  return Object.assign({}, overrides, {\n    headers: Object.assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials,\n  })\n}\n","import type {MutationSelection} from '../types'\n\nexport function getSelection(sel: unknown): MutationSelection {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {id: sel}\n  }\n\n  if (typeof sel === 'object' && sel !== null && 'query' in sel && typeof sel.query === 'string') {\n    return 'params' in sel && typeof sel.params === 'object' && sel.params !== null\n      ? {query: sel.query, params: sel.params}\n      : {query: sel.query}\n  }\n\n  const selectionOpts = [\n    '* Document ID (<docId>)',\n    '* Array of document IDs',\n    '* Object containing `query`',\n  ].join('\\n')\n\n  throw new Error(`Unknown selection - must be one of:\\n\\n${selectionOpts}`)\n}\n","import type {Any, InitializedClientConfig} from './types'\n\nconst VALID_ASSET_TYPES = ['image', 'file']\nconst VALID_INSERT_LOCATIONS = ['before', 'after', 'replace']\n\nexport const dataset = (name: string) => {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error(\n      'Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters'\n    )\n  }\n}\n\nexport const projectId = (id: string) => {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes')\n  }\n}\n\nexport const validateAssetType = (type: string) => {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(`Invalid asset type: ${type}. Must be one of ${VALID_ASSET_TYPES.join(', ')}`)\n  }\n}\n\nexport const validateObject = (op: string, val: Any) => {\n  if (val === null || typeof val !== 'object' || Array.isArray(val)) {\n    throw new Error(`${op}() takes an object of properties`)\n  }\n}\n\nexport const validateDocumentId = (op: string, id: string) => {\n  if (typeof id !== 'string' || !/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id) || id.includes('..')) {\n    throw new Error(`${op}(): \"${id}\" is not a valid document ID`)\n  }\n}\n\nexport const requireDocumentId = (op: string, doc: Record<string, Any>) => {\n  if (!doc._id) {\n    throw new Error(`${op}() requires that the document contains an ID (\"_id\" property)`)\n  }\n\n  validateDocumentId(op, doc._id)\n}\n\nexport const validateInsert = (at: string, selector: string, items: Any[]) => {\n  const signature = 'insert(at, selector, items)'\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    const valid = VALID_INSERT_LOCATIONS.map((loc) => `\"${loc}\"`).join(', ')\n    throw new Error(`${signature} takes an \"at\"-argument which is one of: ${valid}`)\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(`${signature} takes a \"selector\"-argument which must be a string`)\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(`${signature} takes an \"items\"-argument which must be an array`)\n  }\n}\n\nexport const hasDataset = (config: InitializedClientConfig): string => {\n  if (!config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries')\n  }\n\n  return config.dataset || ''\n}\n\nexport const requestTag = (tag: string) => {\n  if (typeof tag !== 'string' || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\n      `Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.`\n    )\n  }\n\n  return tag\n}\n","import type {Any, QueryParams} from '../types'\n\nexport const encodeQueryString = ({\n  query,\n  params = {},\n  options = {},\n}: {\n  query: string\n  params?: QueryParams\n  options?: Any\n}) => {\n  const searchParams = new URLSearchParams()\n  // We generally want tag at the start of the query string\n  const {tag, ...opts} = options\n  if (tag) searchParams.set('tag', tag)\n  searchParams.set('query', query)\n\n  // Iterate params, the keys are prefixed with `$` and their values JSON stringified\n  for (const [key, value] of Object.entries(params)) {\n    searchParams.set(`$${key}`, JSON.stringify(value))\n  }\n  // Options are passed as-is\n  for (const [key, value] of Object.entries(opts)) {\n    // Skip falsy values\n    if (value) searchParams.set(key, `${value}`)\n  }\n\n  return `?${searchParams}`\n}\n","import {type Observable} from 'rxjs'\n\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {\n  AllDocumentIdsMutationOptions,\n  AllDocumentsMutationOptions,\n  Any,\n  AttributeSet,\n  BaseMutationOptions,\n  FirstDocumentIdMutationOptions,\n  FirstDocumentMutationOptions,\n  MultipleMutationResult,\n  PatchMutationOperation,\n  PatchOperations,\n  PatchSelection,\n  SanityDocument,\n  SingleMutationResult,\n} from '../types'\nimport {getSelection} from '../util/getSelection'\nimport {validateInsert, validateObject} from '../validators'\n\n/** @internal */\nexport class BasePatch {\n  protected selection: PatchSelection\n  protected operations: PatchOperations\n  constructor(selection: PatchSelection, operations: PatchOperations = {}) {\n    this.selection = selection\n    this.operations = operations\n  }\n\n  /**\n   * Sets the given attributes to the document. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */\n  set(attrs: AttributeSet): this {\n    return this._assign('set', attrs)\n  }\n\n  /**\n   * Sets the given attributes to the document if they are not currently set. Does NOT merge objects.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to set. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"value\"\\}\n   */\n  setIfMissing(attrs: AttributeSet): this {\n    return this._assign('setIfMissing', attrs)\n  }\n\n  /**\n   * Performs a \"diff-match-patch\" operation on the string attributes provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attributes to perform operation on. To set a deep attribute, use JSONMatch, eg: \\{\"nested.prop\": \"dmp\"\\}\n   */\n  diffMatchPatch(attrs: AttributeSet): this {\n    validateObject('diffMatchPatch', attrs)\n    return this._assign('diffMatchPatch', attrs)\n  }\n\n  /**\n   * Unsets the attribute paths provided.\n   * The operation is added to the current patch, ready to be commited by `commit()`\n   *\n   * @param attrs - Attribute paths to unset.\n   */\n  unset(attrs: string[]): this {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given')\n    }\n\n    this.operations = Object.assign({}, this.operations, {unset: attrs})\n    return this\n  }\n\n  /**\n   * Increment a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to increment, values representing the number to increment by.\n   */\n  inc(attrs: {[key: string]: number}): this {\n    return this._assign('inc', attrs)\n  }\n\n  /**\n   * Decrement a numeric value. Each entry in the argument is either an attribute or a JSON path. The value may be a positive or negative integer or floating-point value. The operation will fail if target value is not a numeric value, or doesn't exist.\n   *\n   * @param attrs - Object of attribute paths to decrement, values representing the number to decrement by.\n   */\n  dec(attrs: {[key: string]: number}): this {\n    return this._assign('dec', attrs)\n  }\n\n  /**\n   * Provides methods for modifying arrays, by inserting, appending and replacing elements via a JSONPath expression.\n   *\n   * @param at - Location to insert at, relative to the given selector, or 'replace' the matched path\n   * @param selector - JSONPath expression, eg `comments[-1]` or `blocks[_key==\"abc123\"]`\n   * @param items - Array of items to insert/replace\n   */\n  insert(at: 'before' | 'after' | 'replace', selector: string, items: Any[]): this {\n    validateInsert(at, selector, items)\n    return this._assign('insert', {[at]: selector, items})\n  }\n\n  /**\n   * Append the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to append to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to append to the array\n   */\n  append(selector: string, items: Any[]): this {\n    return this.insert('after', `${selector}[-1]`, items)\n  }\n\n  /**\n   * Prepend the given items to the array at the given JSONPath\n   *\n   * @param selector - Attribute/path to prepend to, eg `comments` or `person.hobbies`\n   * @param items - Array of items to prepend to the array\n   */\n  prepend(selector: string, items: Any[]): this {\n    return this.insert('before', `${selector}[0]`, items)\n  }\n\n  /**\n   * Change the contents of an array by removing existing elements and/or adding new elements.\n   *\n   * @param selector - Attribute or JSONPath expression for array\n   * @param start - Index at which to start changing the array (with origin 0). If greater than the length of the array, actual starting index will be set to the length of the array. If negative, will begin that many elements from the end of the array (with origin -1) and will be set to 0 if absolute value is greater than the length of the array.x\n   * @param deleteCount - An integer indicating the number of old array elements to remove.\n   * @param items - The elements to add to the array, beginning at the start index. If you don't specify any elements, splice() will only remove elements from the array.\n   */\n  splice(selector: string, start: number, deleteCount?: number, items?: Any[]): this {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    const delAll = typeof deleteCount === 'undefined' || deleteCount === -1\n    const startIndex = start < 0 ? start - 1 : start\n    const delCount = delAll ? -1 : Math.max(0, start + deleteCount)\n    const delRange = startIndex < 0 && delCount >= 0 ? '' : delCount\n    const rangeSelector = `${selector}[${startIndex}:${delRange}]`\n    return this.insert('replace', rangeSelector, items || [])\n  }\n\n  /**\n   * Adds a revision clause, preventing the document from being patched if the `_rev` property does not match the given value\n   *\n   * @param rev - Revision to lock the patch to\n   */\n  ifRevisionId(rev: string): this {\n    this.operations.ifRevisionID = rev\n    return this\n  }\n\n  /**\n   * Return a plain JSON representation of the patch\n   */\n  serialize(): PatchMutationOperation {\n    return {...getSelection(this.selection), ...this.operations}\n  }\n\n  /**\n   * Return a plain JSON representation of the patch\n   */\n  toJSON(): PatchMutationOperation {\n    return this.serialize()\n  }\n\n  /**\n   * Clears the patch of all operations\n   */\n  reset(): this {\n    this.operations = {}\n    return this\n  }\n\n  protected _assign(op: keyof PatchOperations, props: Any, merge = true): this {\n    validateObject(op, props)\n    this.operations = Object.assign({}, this.operations, {\n      [op]: Object.assign({}, (merge && this.operations[op]) || {}, props),\n    })\n    return this\n  }\n\n  protected _set(op: keyof PatchOperations, props: Any): this {\n    return this._assign(op, props, false)\n  }\n}\n\n/** @public */\nexport class ObservablePatch extends BasePatch {\n  #client?: ObservableSanityClient\n\n  constructor(\n    selection: PatchSelection,\n    operations?: PatchOperations,\n    client?: ObservableSanityClient\n  ) {\n    super(selection, operations)\n    this.#client = client\n  }\n\n  /**\n   * Clones the patch\n   */\n  clone(): ObservablePatch {\n    return new ObservablePatch(this.selection, {...this.operations}, this.#client)\n  }\n\n  /**\n   * Commit the patch, returning an observable that produces the first patched document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Commit the patch, returning an observable that produces an array of the mutated documents\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Commit the patch, returning an observable that produces a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: FirstDocumentIdMutationOptions): Observable<SingleMutationResult>\n  /**\n   * Commit the patch, returning an observable that produces a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: AllDocumentIdsMutationOptions): Observable<MultipleMutationResult>\n  /**\n   * Commit the patch, returning an observable that produces the first patched document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?:\n      | FirstDocumentMutationOptions\n      | AllDocumentsMutationOptions\n      | FirstDocumentIdMutationOptions\n      | AllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    if (!this.#client) {\n      throw new Error(\n        'No `client` passed to patch, either provide one or pass the ' +\n          'patch to a clients `mutate()` method'\n      )\n    }\n\n    const returnFirst = typeof this.selection === 'string'\n    const opts = Object.assign({returnFirst, returnDocuments: true}, options)\n    return this.#client.mutate<R>({patch: this.serialize()} as Any, opts)\n  }\n}\n\n/** @public */\nexport class Patch extends BasePatch {\n  #client?: SanityClient\n  constructor(selection: PatchSelection, operations?: PatchOperations, client?: SanityClient) {\n    super(selection, operations)\n    this.#client = client\n  }\n\n  /**\n   * Clones the patch\n   */\n  clone(): Patch {\n    return new Patch(this.selection, {...this.operations}, this.#client)\n  }\n\n  /**\n   * Commit the patch, returning a promise that resolves to the first patched document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Commit the patch, returning a promise that resolves to an array of the mutated documents\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Commit the patch, returning a promise that resolves to a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: FirstDocumentIdMutationOptions): Promise<SingleMutationResult>\n  /**\n   * Commit the patch, returning a promise that resolves to a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: AllDocumentIdsMutationOptions): Promise<MultipleMutationResult>\n  /**\n   * Commit the patch, returning a promise that resolves to the first patched document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?:\n      | FirstDocumentMutationOptions\n      | AllDocumentsMutationOptions\n      | FirstDocumentIdMutationOptions\n      | AllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    if (!this.#client) {\n      throw new Error(\n        'No `client` passed to patch, either provide one or pass the ' +\n          'patch to a clients `mutate()` method'\n      )\n    }\n\n    const returnFirst = typeof this.selection === 'string'\n    const opts = Object.assign({returnFirst, returnDocuments: true}, options)\n    return this.#client.mutate<R>({patch: this.serialize()} as Any, opts)\n  }\n}\n","import type {Observable} from 'rxjs'\n\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {\n  Any,\n  BaseMutationOptions,\n  IdentifiedSanityDocumentStub,\n  MultipleMutationResult,\n  Mutation,\n  PatchOperations,\n  SanityDocument,\n  SanityDocumentStub,\n  SingleMutationResult,\n  TransactionAllDocumentIdsMutationOptions,\n  TransactionAllDocumentsMutationOptions,\n  TransactionFirstDocumentIdMutationOptions,\n  TransactionFirstDocumentMutationOptions,\n} from '../types'\nimport * as validators from '../validators'\nimport {ObservablePatch, Patch} from './patch'\n\n/** @public */\nexport type PatchBuilder = (patch: Patch) => Patch\n/** @public */\nexport type ObservablePatchBuilder = (patch: ObservablePatch) => ObservablePatch\n\nconst defaultMutateOptions = {returnDocuments: false}\n\n/** @internal */\nexport class BaseTransaction {\n  protected operations: Mutation[]\n  protected trxId?: string\n  constructor(operations: Mutation[] = [], transactionId?: string) {\n    this.operations = operations\n    this.trxId = transactionId\n  }\n  /**\n   * Creates a new Sanity document. If `_id` is provided and already exists, the mutation will fail. If no `_id` is given, one will automatically be generated by the database.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create. Requires a `_type` property.\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(doc: SanityDocumentStub<R>): this {\n    validators.validateObject('create', doc)\n    return this._add({create: doc})\n  }\n\n  /**\n   * Creates a new Sanity document. If a document with the same `_id` already exists, the create operation will be ignored.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create if it does not already exist. Requires `_id` and `_type` properties.\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    doc: IdentifiedSanityDocumentStub<R>\n  ): this {\n    const op = 'createIfNotExists'\n    validators.validateObject(op, doc)\n    validators.requireDocumentId(op, doc)\n    return this._add({[op]: doc})\n  }\n\n  /**\n   * Creates a new Sanity document, or replaces an existing one if the same `_id` is already used.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param doc - Document to create or replace. Requires `_id` and `_type` properties.\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    doc: IdentifiedSanityDocumentStub<R>\n  ): this {\n    const op = 'createOrReplace'\n    validators.validateObject(op, doc)\n    validators.requireDocumentId(op, doc)\n    return this._add({[op]: doc})\n  }\n\n  /**\n   * Deletes the document with the given document ID\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to delete\n   */\n  delete(documentId: string): this {\n    validators.validateDocumentId('delete', documentId)\n    return this._add({delete: {id: documentId}})\n  }\n\n  /**\n   * Gets the current transaction ID, if any\n   */\n  transactionId(): string | undefined\n  /**\n   * Set the ID of this transaction.\n   *\n   * @param id - Transaction ID\n   */\n  transactionId(id: string): this\n  transactionId(id?: string): this | string | undefined {\n    if (!id) {\n      return this.trxId\n    }\n\n    this.trxId = id\n    return this\n  }\n\n  /**\n   * Return a plain JSON representation of the transaction\n   */\n  serialize(): Mutation[] {\n    return [...this.operations]\n  }\n\n  /**\n   * Return a plain JSON representation of the transaction\n   */\n  toJSON(): Mutation[] {\n    return this.serialize()\n  }\n\n  /**\n   * Clears the transaction of all operations\n   */\n  reset(): this {\n    this.operations = []\n    return this\n  }\n\n  protected _add(mut: Mutation): this {\n    this.operations.push(mut)\n    return this\n  }\n}\n\n/** @public */\nexport class Transaction extends BaseTransaction {\n  #client?: SanityClient\n  constructor(operations?: Mutation[], client?: SanityClient, transactionId?: string) {\n    super(operations, transactionId)\n    this.#client = client\n  }\n\n  /**\n   * Clones the transaction\n   */\n  clone(): Transaction {\n    return new Transaction([...this.operations], this.#client, this.trxId)\n  }\n\n  /**\n   * Commit the transaction, returning a promise that resolves to the first mutated document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any>>(\n    options: TransactionFirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Commit the transaction, returning a promise that resolves to an array of the mutated documents\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any>>(\n    options: TransactionAllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Commit the transaction, returning a promise that resolves to a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: TransactionFirstDocumentIdMutationOptions): Promise<SingleMutationResult>\n  /**\n   * Commit the transaction, returning a promise that resolves to a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: TransactionAllDocumentIdsMutationOptions): Promise<MultipleMutationResult>\n  /**\n   * Commit the transaction, returning a promise that resolves to a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options?: BaseMutationOptions): Promise<MultipleMutationResult>\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?:\n      | TransactionFirstDocumentMutationOptions\n      | TransactionAllDocumentsMutationOptions\n      | TransactionFirstDocumentIdMutationOptions\n      | TransactionAllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    if (!this.#client) {\n      throw new Error(\n        'No `client` passed to transaction, either provide one or pass the ' +\n          'transaction to a clients `mutate()` method'\n      )\n    }\n\n    return this.#client.mutate<R>(\n      this.serialize() as Any,\n      Object.assign({transactionId: this.trxId}, defaultMutateOptions, options || {})\n    )\n  }\n\n  /**\n   * Performs a patch on the given document ID. Can either be a builder function or an object of patch operations.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to perform the patch operation on\n   * @param patchOps - Operations to perform, or a builder function\n   */\n  patch(documentId: string, patchOps?: PatchBuilder | PatchOperations): this\n  /**\n   * Adds the given patch instance to the transaction.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param patch - Patch to execute\n   */\n  patch(patch: Patch): this\n  patch(patchOrDocumentId: Patch | string, patchOps?: PatchBuilder | PatchOperations): this {\n    const isBuilder = typeof patchOps === 'function'\n    const isPatch = typeof patchOrDocumentId !== 'string' && patchOrDocumentId instanceof Patch\n\n    // transaction.patch(client.patch('documentId').inc({visits: 1}))\n    if (isPatch) {\n      return this._add({patch: patchOrDocumentId.serialize()})\n    }\n\n    // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n    if (isBuilder) {\n      const patch = patchOps(new Patch(patchOrDocumentId, {}, this.#client))\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch')\n      }\n\n      return this._add({patch: patch.serialize()})\n    }\n\n    return this._add({patch: {id: patchOrDocumentId, ...patchOps}})\n  }\n}\n\n/** @public */\nexport class ObservableTransaction extends BaseTransaction {\n  #client?: ObservableSanityClient\n  constructor(operations?: Mutation[], client?: ObservableSanityClient, transactionId?: string) {\n    super(operations, transactionId)\n    this.#client = client\n  }\n\n  /**\n   * Clones the transaction\n   */\n  clone(): ObservableTransaction {\n    return new ObservableTransaction([...this.operations], this.#client, this.trxId)\n  }\n\n  /**\n   * Commit the transaction, returning an observable that produces the first mutated document\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any>>(\n    options: TransactionFirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Commit the transaction, returning an observable that produces an array of the mutated documents\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit<R extends Record<string, Any>>(\n    options: TransactionAllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Commit the transaction, returning an observable that produces a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: TransactionFirstDocumentIdMutationOptions): Observable<SingleMutationResult>\n  /**\n   * Commit the transaction, returning an observable that produces a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options: TransactionAllDocumentIdsMutationOptions): Observable<MultipleMutationResult>\n  /**\n   * Commit the transaction, returning an observable that produces a mutation result object\n   *\n   * @param options - Options for the mutation operation\n   */\n  commit(options?: BaseMutationOptions): Observable<MultipleMutationResult>\n  commit<R extends Record<string, Any> = Record<string, Any>>(\n    options?:\n      | TransactionFirstDocumentMutationOptions\n      | TransactionAllDocumentsMutationOptions\n      | TransactionFirstDocumentIdMutationOptions\n      | TransactionAllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    if (!this.#client) {\n      throw new Error(\n        'No `client` passed to transaction, either provide one or pass the ' +\n          'transaction to a clients `mutate()` method'\n      )\n    }\n\n    return this.#client.mutate<R>(\n      this.serialize() as Any,\n      Object.assign({transactionId: this.trxId}, defaultMutateOptions, options || {})\n    )\n  }\n\n  /**\n   * Performs a patch on the given document ID. Can either be a builder function or an object of patch operations.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param documentId - Document ID to perform the patch operation on\n   * @param patchOps - Operations to perform, or a builder function\n   */\n  patch(documentId: string, patchOps?: ObservablePatchBuilder | PatchOperations): this\n  /**\n   * Adds the given patch instance to the transaction.\n   * The operation is added to the current transaction, ready to be commited by `commit()`\n   *\n   * @param patch - ObservablePatch to execute\n   */\n  patch(patch: ObservablePatch): this\n  patch(\n    patchOrDocumentId: ObservablePatch | string,\n    patchOps?: ObservablePatchBuilder | PatchOperations\n  ): this {\n    const isBuilder = typeof patchOps === 'function'\n    const isPatch =\n      typeof patchOrDocumentId !== 'string' && patchOrDocumentId instanceof ObservablePatch\n\n    // transaction.patch(client.patch('documentId').inc({visits: 1}))\n    if (isPatch) {\n      return this._add({patch: patchOrDocumentId.serialize()})\n    }\n\n    // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n    if (isBuilder) {\n      const patch = patchOps(new ObservablePatch(patchOrDocumentId, {}, this.#client))\n      if (!(patch instanceof ObservablePatch)) {\n        throw new Error('function passed to `patch()` must return the patch')\n      }\n\n      return this._add({patch: patch.serialize()})\n    }\n\n    return this._add({patch: {id: patchOrDocumentId, ...patchOps}})\n  }\n}\n","import {type MonoTypeOperatorFunction, Observable} from 'rxjs'\nimport {filter, map} from 'rxjs/operators'\n\nimport {requestOptions} from '../http/requestOptions'\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {\n  AllDocumentIdsMutationOptions,\n  AllDocumentsMutationOptions,\n  Any,\n  BaseMutationOptions,\n  FilteredResponseQueryOptions,\n  FirstDocumentIdMutationOptions,\n  FirstDocumentMutationOptions,\n  HttpRequest,\n  HttpRequestEvent,\n  IdentifiedSanityDocumentStub,\n  MultipleMutationResult,\n  Mutation,\n  MutationSelection,\n  QueryParams,\n  RawQueryResponse,\n  RequestObservableOptions,\n  RequestOptions,\n  SanityDocument,\n  SingleMutationResult,\n  UnfilteredResponseQueryOptions,\n} from '../types'\nimport {getSelection} from '../util/getSelection'\nimport * as validate from '../validators'\nimport * as validators from '../validators'\nimport {encodeQueryString} from './encodeQueryString'\nimport {ObservablePatch, Patch} from './patch'\nimport {ObservableTransaction, Transaction} from './transaction'\n\nconst excludeFalsey = (param: Any, defValue: Any) => {\n  const value = typeof param === 'undefined' ? defValue : param\n  return param === false ? undefined : value\n}\n\nconst getMutationQuery = (options: BaseMutationOptions = {}) => {\n  return {\n    dryRun: options.dryRun,\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync',\n    autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n    skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation,\n  }\n}\n\nconst isResponse = (event: Any) => event.type === 'response'\nconst getBody = (event: Any) => event.body\n\nconst indexBy = (docs: Any[], attr: Any) =>\n  docs.reduce((indexed, doc) => {\n    indexed[attr(doc)] = doc\n    return indexed\n  }, Object.create(null))\n\nconst getQuerySizeLimit = 11264\n\n/** @internal */\nexport function _fetch<R, Q extends QueryParams>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  query: string,\n  params?: Q,\n  options: FilteredResponseQueryOptions | UnfilteredResponseQueryOptions = {}\n): Observable<RawQueryResponse<R> | R> {\n  const mapResponse =\n    options.filterResponse === false ? (res: Any) => res : (res: Any) => res.result\n\n  return _dataRequest(client, httpRequest, 'query', {query, params}, options).pipe(map(mapResponse))\n}\n\n/** @internal */\nexport function _getDocument<R extends Record<string, Any>>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  id: string,\n  opts: {tag?: string} = {}\n): Observable<SanityDocument<R> | undefined> {\n  const options = {uri: _getDataUrl(client, 'doc', id), json: true, tag: opts.tag}\n  return _requestObservable<SanityDocument<R> | undefined>(client, httpRequest, options).pipe(\n    filter(isResponse),\n    map((event) => event.body.documents && event.body.documents[0])\n  )\n}\n\n/** @internal */\nexport function _getDocuments<R extends Record<string, Any>>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  ids: string[],\n  opts: {tag?: string} = {}\n): Observable<(SanityDocument<R> | null)[]> {\n  const options = {uri: _getDataUrl(client, 'doc', ids.join(',')), json: true, tag: opts.tag}\n  return _requestObservable<(SanityDocument<R> | null)[]>(client, httpRequest, options).pipe(\n    filter(isResponse),\n    map((event: Any) => {\n      const indexed = indexBy(event.body.documents || [], (doc: Any) => doc._id)\n      return ids.map((id) => indexed[id] || null)\n    })\n  )\n}\n\n/** @internal */\nexport function _createIfNotExists<R extends Record<string, Any>>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  doc: IdentifiedSanityDocumentStub<R>,\n  options?:\n    | AllDocumentIdsMutationOptions\n    | AllDocumentsMutationOptions\n    | BaseMutationOptions\n    | FirstDocumentIdMutationOptions\n    | FirstDocumentMutationOptions\n): Observable<\n  SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n> {\n  validators.requireDocumentId('createIfNotExists', doc)\n  return _create<R>(client, httpRequest, doc, 'createIfNotExists', options)\n}\n\n/** @internal */\nexport function _createOrReplace<R extends Record<string, Any>>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  doc: IdentifiedSanityDocumentStub<R>,\n  options?:\n    | AllDocumentIdsMutationOptions\n    | AllDocumentsMutationOptions\n    | BaseMutationOptions\n    | FirstDocumentIdMutationOptions\n    | FirstDocumentMutationOptions\n): Observable<\n  SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n> {\n  validators.requireDocumentId('createOrReplace', doc)\n  return _create<R>(client, httpRequest, doc, 'createOrReplace', options)\n}\n\n/** @internal */\nexport function _delete<R extends Record<string, Any>>(\n  client: ObservableSanityClient | SanityClient,\n  httpRequest: HttpRequest,\n  selection: string | MutationSelection,\n  options?:\n    | AllDocumentIdsMutationOptions\n    | AllDocumentsMutationOptions\n    | BaseMutationOptions\n    | FirstDocumentIdMutationOptions\n    | FirstDocumentMutationOptions\n): Observable<\n  SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n> {\n  return _dataRequest(\n    client,\n    httpRequest,\n    'mutate',\n    {mutations: [{delete: getSelection(selection)}]},\n    options\n  )\n}\n\n/** @internal */\nexport function _mutate<R extends Record<string, Any>>(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  mutations: Mutation<R>[] | Patch | ObservablePatch | Transaction | ObservableTransaction,\n  options?:\n    | AllDocumentIdsMutationOptions\n    | AllDocumentsMutationOptions\n    | BaseMutationOptions\n    | FirstDocumentIdMutationOptions\n    | FirstDocumentMutationOptions\n): Observable<\n  SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n> {\n  let mut: Mutation | Mutation[]\n  if (mutations instanceof Patch || mutations instanceof ObservablePatch) {\n    mut = {patch: mutations.serialize()}\n  } else if (mutations instanceof Transaction || mutations instanceof ObservableTransaction) {\n    mut = mutations.serialize()\n  } else {\n    mut = mutations\n  }\n\n  const muts = Array.isArray(mut) ? mut : [mut]\n  const transactionId = (options && options.transactionId) || undefined\n  return _dataRequest(client, httpRequest, 'mutate', {mutations: muts, transactionId}, options)\n}\n\n/**\n * @internal\n */\nexport function _dataRequest(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  endpoint: string,\n  body: Any,\n  options: Any = {}\n): Any {\n  const isMutation = endpoint === 'mutate'\n  const isQuery = endpoint === 'query'\n\n  // Check if the query string is within a configured threshold,\n  // in which case we can use GET. Otherwise, use POST.\n  const strQuery = isMutation ? '' : encodeQueryString(body)\n  const useGet = !isMutation && strQuery.length < getQuerySizeLimit\n  const stringQuery = useGet ? strQuery : ''\n  const returnFirst = options.returnFirst\n  const {timeout, token, tag, headers} = options\n\n  const uri = _getDataUrl(client, endpoint, stringQuery)\n\n  const reqOptions = {\n    method: useGet ? 'GET' : 'POST',\n    uri: uri,\n    json: true,\n    body: useGet ? undefined : body,\n    query: isMutation && getMutationQuery(options),\n    timeout,\n    headers,\n    token,\n    tag,\n    canUseCdn: isQuery,\n    signal: options.signal,\n  }\n\n  return _requestObservable(client, httpRequest, reqOptions).pipe(\n    filter(isResponse),\n    map(getBody),\n    map((res) => {\n      if (!isMutation) {\n        return res\n      }\n\n      // Should we return documents?\n      const results = res.results || []\n      if (options.returnDocuments) {\n        return returnFirst\n          ? results[0] && results[0].document\n          : results.map((mut: Any) => mut.document)\n      }\n\n      // Return a reduced subset\n      const key = returnFirst ? 'documentId' : 'documentIds'\n      const ids = returnFirst ? results[0] && results[0].id : results.map((mut: Any) => mut.id)\n      return {\n        transactionId: res.transactionId,\n        results: results,\n        [key]: ids,\n      }\n    })\n  )\n}\n\n/**\n * @internal\n */\nexport function _create<R extends Record<string, Any>>(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  doc: Any,\n  op: Any,\n  options: Any = {}\n): Observable<\n  SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n> {\n  const mutation = {[op]: doc}\n  const opts = Object.assign({returnFirst: true, returnDocuments: true}, options)\n  return _dataRequest(client, httpRequest, 'mutate', {mutations: [mutation]}, opts)\n}\n\n/**\n * @internal\n */\nexport function _requestObservable<R>(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  options: RequestObservableOptions\n): Observable<HttpRequestEvent<R>> {\n  const uri = options.url || (options.uri as string)\n  const config = client.config()\n\n  // If the `canUseCdn`-option is not set we detect it automatically based on the method + URL.\n  // Only the /data endpoint is currently available through API-CDN.\n  const canUseCdn =\n    typeof options.canUseCdn === 'undefined'\n      ? ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0\n      : options.canUseCdn\n\n  const useCdn = config.useCdn && canUseCdn\n\n  const tag =\n    options.tag && config.requestTagPrefix\n      ? [config.requestTagPrefix, options.tag].join('.')\n      : options.tag || config.requestTagPrefix\n\n  if (tag) {\n    options.query = {tag: validate.requestTag(tag), ...options.query}\n  }\n\n  // GROQ query-only parameters\n  if (['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/query/') === 0) {\n    if (config.resultSourceMap) {\n      options.query = {resultSourceMap: true, ...options.query}\n    }\n    if (typeof config.perspective === 'string' && config.perspective !== 'raw') {\n      options.query = {perspective: config.perspective, ...options.query}\n    }\n  }\n\n  const reqOptions = requestOptions(\n    config,\n    Object.assign({}, options, {\n      url: _getUrl(client, uri, useCdn),\n    })\n  ) as RequestOptions\n\n  const request = new Observable<HttpRequestEvent<R>>((subscriber) =>\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- the typings thinks it's optional because it's not required to specify it when calling createClient, but it's always defined in practice since SanityClient provides a default\n    httpRequest(reqOptions, config.requester!).subscribe(subscriber)\n  )\n\n  return options.signal ? request.pipe(_withAbortSignal(options.signal)) : request\n}\n\n/**\n * @internal\n */\nexport function _request<R>(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  options: Any\n): Observable<R> {\n  const observable = _requestObservable<R>(client, httpRequest, options).pipe(\n    filter((event: Any) => event.type === 'response'),\n    map((event: Any) => event.body)\n  )\n\n  return observable\n}\n\n/**\n * @internal\n */\nexport function _getDataUrl(\n  client: SanityClient | ObservableSanityClient,\n  operation: string,\n  path?: string\n): string {\n  const config = client.config()\n  const catalog = validators.hasDataset(config)\n  const baseUri = `/${operation}/${catalog}`\n  const uri = path ? `${baseUri}/${path}` : baseUri\n  return `/data${uri}`.replace(/\\/($|\\?)/, '$1')\n}\n\n/**\n * @internal\n */\nexport function _getUrl(\n  client: SanityClient | ObservableSanityClient,\n  uri: string,\n  canUseCdn = false\n): string {\n  const {url, cdnUrl} = client.config()\n  const base = canUseCdn ? cdnUrl : url\n  return `${base}/${uri.replace(/^\\//, '')}`\n}\n\n/**\n * @internal\n */\nfunction _withAbortSignal<T>(signal: AbortSignal): MonoTypeOperatorFunction<T> {\n  return (input) => {\n    return new Observable((observer) => {\n      const abort = () => observer.error(_createAbortError(signal))\n\n      if (signal && signal.aborted) {\n        abort()\n        return\n      }\n      const subscription = input.subscribe(observer)\n      signal.addEventListener('abort', abort)\n      return () => {\n        signal.removeEventListener('abort', abort)\n        subscription.unsubscribe()\n      }\n    })\n  }\n}\n// DOMException is supported on most modern browsers and Node.js 18+.\n// @see https://developer.mozilla.org/en-US/docs/Web/API/DOMException#browser_compatibility\nconst isDomExceptionSupported = Boolean(globalThis.DOMException)\n\n/**\n * @internal\n * @param signal\n * Original source copied from https://github.com/sindresorhus/ky/blob/740732c78aad97e9aec199e9871bdbf0ae29b805/source/errors/DOMException.ts\n * TODO: When targeting Node.js 18, use `signal.throwIfAborted()` (https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal/throwIfAborted)\n */\nfunction _createAbortError(signal?: AbortSignal) {\n  /*\n  NOTE: Use DomException with AbortError name as specified in MDN docs (https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort)\n  > When abort() is called, the fetch() promise rejects with an Error of type DOMException, with name AbortError.\n  */\n  if (isDomExceptionSupported) {\n    return new DOMException(signal?.reason ?? 'The operation was aborted.', 'AbortError')\n  }\n\n  // DOMException not supported. Fall back to use of error and override name.\n  const error = new Error(signal?.reason ?? 'The operation was aborted.')\n  error.name = 'AbortError'\n\n  return error\n}\n","import {lastValueFrom, type Observable} from 'rxjs'\nimport {filter, map} from 'rxjs/operators'\n\nimport {_requestObservable} from '../data/dataMethods'\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {\n  Any,\n  HttpRequest,\n  HttpRequestEvent,\n  ResponseEvent,\n  SanityAssetDocument,\n  SanityImageAssetDocument,\n  UploadBody,\n  UploadClientConfig,\n} from '../types'\nimport * as validators from '../validators'\n\n/** @internal */\nexport class ObservableAssetsClient {\n  #client: ObservableSanityClient\n  #httpRequest: HttpRequest\n  constructor(client: ObservableSanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Uploads a file asset to the configured dataset\n   *\n   * @param assetType - Asset type (file)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'file',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Observable<HttpRequestEvent<{document: SanityAssetDocument}>>\n\n  /**\n   * Uploads an image asset to the configured dataset\n   *\n   * @param assetType - Asset type (image)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Observable<HttpRequestEvent<{document: SanityImageAssetDocument}>>\n  /**\n   * Uploads a file or an image asset to the configured dataset\n   *\n   * @param assetType - Asset type (file/image)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'file' | 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Observable<HttpRequestEvent<{document: SanityAssetDocument | SanityImageAssetDocument}>>\n  upload(\n    assetType: 'file' | 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Observable<HttpRequestEvent<{document: SanityAssetDocument | SanityImageAssetDocument}>> {\n    return _upload(this.#client, this.#httpRequest, assetType, body, options)\n  }\n}\n\n/** @internal */\nexport class AssetsClient {\n  #client: SanityClient\n  #httpRequest: HttpRequest\n  constructor(client: SanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Uploads a file asset to the configured dataset\n   *\n   * @param assetType - Asset type (file)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'file',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Promise<SanityAssetDocument>\n  /**\n   * Uploads an image asset to the configured dataset\n   *\n   * @param assetType - Asset type (image)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Promise<SanityImageAssetDocument>\n  /**\n   * Uploads a file or an image asset to the configured dataset\n   *\n   * @param assetType - Asset type (file/image)\n   * @param body - Asset content - can be a browser File instance, a Blob, a Node.js Buffer instance or a Node.js ReadableStream.\n   * @param options - Options to use for the upload\n   */\n  upload(\n    assetType: 'file' | 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Promise<SanityAssetDocument | SanityImageAssetDocument>\n  upload(\n    assetType: 'file' | 'image',\n    body: UploadBody,\n    options?: UploadClientConfig\n  ): Promise<SanityAssetDocument | SanityImageAssetDocument> {\n    const observable = _upload(this.#client, this.#httpRequest, assetType, body, options)\n    return lastValueFrom(\n      observable.pipe(\n        filter((event: Any) => event.type === 'response'),\n        map(\n          (event) =>\n            (event as ResponseEvent<{document: SanityAssetDocument | SanityImageAssetDocument}>)\n              .body.document\n        )\n      )\n    )\n  }\n}\n\nfunction _upload(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  assetType: 'image' | 'file',\n  body: UploadBody,\n  opts: UploadClientConfig = {}\n): Observable<HttpRequestEvent<{document: SanityAssetDocument | SanityImageAssetDocument}>> {\n  validators.validateAssetType(assetType)\n\n  // If an empty array is given, explicitly set `none` to override API defaults\n  let meta = opts.extract || undefined\n  if (meta && !meta.length) {\n    meta = ['none']\n  }\n\n  const dataset = validators.hasDataset(client.config())\n  const assetEndpoint = assetType === 'image' ? 'images' : 'files'\n  const options = optionsFromFile(opts, body)\n  const {tag, label, title, description, creditLine, filename, source} = options\n  const query: Any = {\n    label,\n    title,\n    description,\n    filename,\n    meta,\n    creditLine,\n  }\n  if (source) {\n    query.sourceId = source.id\n    query.sourceName = source.name\n    query.sourceUrl = source.url\n  }\n  return _requestObservable(client, httpRequest, {\n    tag,\n    method: 'POST',\n    timeout: options.timeout || 0,\n    uri: `/assets/${assetEndpoint}/${dataset}`,\n    headers: options.contentType ? {'Content-Type': options.contentType} : {},\n    query,\n    body,\n  })\n}\n\nfunction optionsFromFile(opts: Record<string, Any>, file: Any) {\n  if (typeof File === 'undefined' || !(file instanceof File)) {\n    return opts\n  }\n\n  return Object.assign(\n    {\n      filename: opts.preserveFilename === false ? undefined : file.name,\n      contentType: file.type,\n    },\n    opts\n  )\n}\n","const BASE_URL = 'https://www.sanity.io/help/'\n\nexport function generateHelpUrl(slug: string) {\n  return BASE_URL + slug\n}\n","import type {Any} from '../types'\n\nexport function once(fn: Any) {\n  let didCall = false\n  let returnValue: Any\n  return (...args: Any[]) => {\n    if (didCall) {\n      return returnValue\n    }\n    returnValue = fn(...args)\n    didCall = true\n    return returnValue\n  }\n}\n","import {generateHelpUrl} from './generateHelpUrl'\nimport {Any} from './types'\nimport {once} from './util/once'\n\nconst createWarningPrinter = (message: string[]) =>\n  // eslint-disable-next-line no-console\n  once((...args: Any[]) => console.warn(message.join(' '), ...args))\n\nexport const printCdnWarning = createWarningPrinter([\n  `Since you haven't set a value for \\`useCdn\\`, we will deliver content using our`,\n  `global, edge-cached API-CDN. If you wish to have content delivered faster, set`,\n  `\\`useCdn: false\\` to use the Live API. Note: You may incur higher costs using the live API.`,\n])\n\nexport const printBrowserTokenWarning = createWarningPrinter([\n  'You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.',\n  `See ${generateHelpUrl(\n    'js-client-browser-token'\n  )} for more information and how to hide this warning.`,\n])\n\nexport const printNoApiVersionSpecifiedWarning = createWarningPrinter([\n  'Using the Sanity client without specifying an API version is deprecated.',\n  `See ${generateHelpUrl('js-client-api-version')}`,\n])\n\nexport const printNoDefaultExport = createWarningPrinter([\n  'The default export of @sanity/client has been deprecated. Use the named export `createClient` instead.',\n])\n","import {generateHelpUrl} from './generateHelpUrl'\nimport type {ClientConfig, InitializedClientConfig} from './types'\nimport * as validate from './validators'\nimport * as warnings from './warnings'\n\nconst defaultCdnHost = 'apicdn.sanity.io'\nexport const defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  apiVersion: '1',\n  useProjectHostname: true,\n} satisfies ClientConfig\n\nconst LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0']\nconst isLocal = (host: string) => LOCALHOSTS.indexOf(host) !== -1\n\nexport const validateApiVersion = function validateApiVersion(apiVersion: string) {\n  if (apiVersion === '1' || apiVersion === 'X') {\n    return\n  }\n\n  const apiDate = new Date(apiVersion)\n  const apiVersionValid =\n    /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0\n\n  if (!apiVersionValid) {\n    throw new Error('Invalid API version string, expected `1` or date in format `YYYY-MM-DD`')\n  }\n}\n\nexport const initConfig = (\n  config: Partial<ClientConfig>,\n  prevConfig: Partial<ClientConfig>\n): InitializedClientConfig => {\n  const specifiedConfig = Object.assign({}, prevConfig, config)\n  if (!specifiedConfig.apiVersion) {\n    warnings.printNoApiVersionSpecifiedWarning()\n  }\n\n  const newConfig = Object.assign({} as InitializedClientConfig, defaultConfig, specifiedConfig)\n  const projectBased = newConfig.useProjectHostname\n\n  if (typeof Promise === 'undefined') {\n    const helpUrl = generateHelpUrl('js-client-promise-polyfill')\n    throw new Error(`No native Promise-implementation found, polyfill needed - see ${helpUrl}`)\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`')\n  }\n\n  const isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname\n  const isLocalhost = isBrowser && isLocal(window.location.hostname)\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    warnings.printBrowserTokenWarning()\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    warnings.printCdnWarning()\n  }\n\n  if (projectBased) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- the nullability here is wrong, as line 48 throws an error if it's undefined\n    validate.projectId(newConfig.projectId!)\n  }\n\n  if (newConfig.dataset) {\n    validate.dataset(newConfig.dataset)\n  }\n\n  if ('requestTagPrefix' in newConfig) {\n    // Allow setting and unsetting request tag prefix\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix\n      ? validate.requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, '')\n      : undefined\n  }\n\n  newConfig.apiVersion = `${newConfig.apiVersion}`.replace(/^v/, '')\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost\n  // If `useCdn` is undefined, we treat it as `true`\n  newConfig.useCdn = newConfig.useCdn !== false && !newConfig.withCredentials\n\n  validateApiVersion(newConfig.apiVersion)\n\n  const hostParts = newConfig.apiHost.split('://', 2)\n  const protocol = hostParts[0]\n  const host = hostParts[1]\n  const cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host\n\n  if (newConfig.useProjectHostname) {\n    newConfig.url = `${protocol}://${newConfig.projectId}.${host}/v${newConfig.apiVersion}`\n    newConfig.cdnUrl = `${protocol}://${newConfig.projectId}.${cdnHost}/v${newConfig.apiVersion}`\n  } else {\n    newConfig.url = `${newConfig.apiHost}/v${newConfig.apiVersion}`\n    newConfig.cdnUrl = newConfig.url\n  }\n\n  return newConfig\n}\n","import type {Any} from '../types'\n\nexport default (obj: Any, defaults: Any) =>\n  Object.keys(defaults)\n    .concat(Object.keys(obj))\n    .reduce((target, prop) => {\n      target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop]\n\n      return target\n    }, {} as Any)\n","import {Any} from '../types'\n\nexport const pick = (obj: Any, props: Any) =>\n  props.reduce((selection: Any, prop: Any) => {\n    if (typeof obj[prop] === 'undefined') {\n      return selection\n    }\n\n    selection[prop] = obj[prop]\n    return selection\n  }, {})\n","import {Observable} from 'rxjs'\n\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {Any, ListenEvent, ListenOptions, MutationEvent, QueryParams} from '../types'\nimport defaults from '../util/defaults'\nimport {pick} from '../util/pick'\nimport {_getDataUrl} from './dataMethods'\nimport {encodeQueryString} from './encodeQueryString'\n\n// Limit is 16K for a _request_, eg including headers. Have to account for an\n// unknown range of headers, but an average EventSource request from Chrome seems\n// to have around 700 bytes of cruft, so let us account for 1.2K to be \"safe\"\nconst MAX_URL_LENGTH = 16000 - 1200\n\nconst possibleOptions = [\n  'includePreviousRevision',\n  'includeResult',\n  'visibility',\n  'effectFormat',\n  'tag',\n]\n\nconst defaultOptions = {\n  includeResult: true,\n}\n\n/**\n * Set up a listener that will be notified when mutations occur on documents matching the provided query/filter.\n *\n * @param query - GROQ-filter to listen to changes for\n * @param params - Optional query parameters\n * @param options - Listener options\n * @internal\n */\nexport function _listen<R extends Record<string, Any> = Record<string, Any>>(\n  this: SanityClient | ObservableSanityClient,\n  query: string,\n  params?: QueryParams\n): Observable<MutationEvent<R>>\n/**\n * Set up a listener that will be notified when mutations occur on documents matching the provided query/filter.\n *\n * @param query - GROQ-filter to listen to changes for\n * @param params - Optional query parameters\n * @param options - Listener options\n * @internal\n */\nexport function _listen<R extends Record<string, Any> = Record<string, Any>>(\n  this: SanityClient | ObservableSanityClient,\n  query: string,\n  params?: QueryParams,\n  options?: ListenOptions\n): Observable<ListenEvent<R>>\n/** @internal */\nexport function _listen<R extends Record<string, Any> = Record<string, Any>>(\n  this: SanityClient | ObservableSanityClient,\n  query: string,\n  params?: QueryParams,\n  opts: ListenOptions = {}\n): Observable<MutationEvent<R> | ListenEvent<R>> {\n  const {url, token, withCredentials, requestTagPrefix} = this.config()\n  const tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join('.') : opts.tag\n  const options = {...defaults(opts, defaultOptions), tag}\n  const listenOpts = pick(options, possibleOptions)\n  const qs = encodeQueryString({query, params, options: {tag, ...listenOpts}})\n\n  const uri = `${url}${_getDataUrl(this, 'listen', qs)}`\n  if (uri.length > MAX_URL_LENGTH) {\n    return new Observable((observer) => observer.error(new Error('Query too large for listener')))\n  }\n\n  const listenFor = options.events ? options.events : ['mutation']\n  const shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1\n\n  const esOptions: EventSourceInit & {headers?: Record<string, string>} = {}\n  if (token || withCredentials) {\n    esOptions.withCredentials = true\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: `Bearer ${token}`,\n    }\n  }\n\n  return new Observable((observer) => {\n    let es: InstanceType<typeof import('@sanity/eventsource')>\n    getEventSource()\n      .then((eventSource) => {\n        es = eventSource\n      })\n      .catch((reason) => {\n        observer.error(reason)\n        stop()\n      })\n    let reconnectTimer: NodeJS.Timeout\n    let stopped = false\n\n    function onError() {\n      if (stopped) {\n        return\n      }\n\n      emitReconnect()\n\n      // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n      if (stopped) {\n        return\n      }\n\n      // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n      if (es.readyState === es.CLOSED) {\n        unsubscribe()\n        clearTimeout(reconnectTimer)\n        reconnectTimer = setTimeout(open, 100)\n      }\n    }\n\n    function onChannelError(err: Any) {\n      observer.error(cooerceError(err))\n    }\n\n    function onMessage(evt: Any) {\n      const event = parseEvent(evt)\n      return event instanceof Error ? observer.error(event) : observer.next(event)\n    }\n\n    function onDisconnect() {\n      stopped = true\n      unsubscribe()\n      observer.complete()\n    }\n\n    function unsubscribe() {\n      if (!es) return\n      es.removeEventListener('error', onError)\n      es.removeEventListener('channelError', onChannelError)\n      es.removeEventListener('disconnect', onDisconnect)\n      listenFor.forEach((type: string) => es.removeEventListener(type, onMessage))\n      es.close()\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({type: 'reconnect'})\n      }\n    }\n\n    async function getEventSource(): Promise<InstanceType<typeof import('@sanity/eventsource')>> {\n      const {default: EventSource} = await import('@sanity/eventsource')\n      const evs = new EventSource(uri, esOptions)\n      evs.addEventListener('error', onError)\n      evs.addEventListener('channelError', onChannelError)\n      evs.addEventListener('disconnect', onDisconnect)\n      listenFor.forEach((type: string) => evs.addEventListener(type, onMessage))\n      return evs\n    }\n\n    function open() {\n      getEventSource()\n        .then((eventSource) => {\n          es = eventSource\n        })\n        .catch((reason) => {\n          observer.error(reason)\n          stop()\n        })\n    }\n\n    function stop() {\n      stopped = true\n      unsubscribe()\n    }\n\n    return stop\n  })\n}\n\nfunction parseEvent(event: Any) {\n  try {\n    const data = (event.data && JSON.parse(event.data)) || {}\n    return Object.assign({type: event.type}, data)\n  } catch (err) {\n    return err\n  }\n}\n\nfunction cooerceError(err: Any) {\n  if (err instanceof Error) {\n    return err\n  }\n\n  const evt = parseEvent(err)\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt))\n}\n\nfunction extractErrorMessage(err: Any) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error'\n  }\n\n  if (err.error.description) {\n    return err.error.description\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2)\n}\n","import {lastValueFrom, type Observable} from 'rxjs'\n\nimport {_request} from '../data/dataMethods'\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {DatasetAclMode, DatasetResponse, DatasetsResponse, HttpRequest} from '../types'\nimport * as validate from '../validators'\n\n/** @internal */\nexport class ObservableDatasetsClient {\n  #client: ObservableSanityClient\n  #httpRequest: HttpRequest\n  constructor(client: ObservableSanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  create(name: string, options?: {aclMode?: DatasetAclMode}): Observable<DatasetResponse> {\n    return _modify<DatasetResponse>(this.#client, this.#httpRequest, 'PUT', name, options)\n  }\n\n  /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */\n  edit(name: string, options?: {aclMode?: DatasetAclMode}): Observable<DatasetResponse> {\n    return _modify<DatasetResponse>(this.#client, this.#httpRequest, 'PATCH', name, options)\n  }\n\n  /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */\n  delete(name: string): Observable<{deleted: true}> {\n    return _modify<{deleted: true}>(this.#client, this.#httpRequest, 'DELETE', name)\n  }\n\n  /**\n   * Fetch a list of datasets for the configured project\n   */\n  list(): Observable<DatasetsResponse> {\n    return _request<DatasetsResponse>(this.#client, this.#httpRequest, {uri: '/datasets'})\n  }\n}\n\n/** @internal */\nexport class DatasetsClient {\n  #client: SanityClient\n  #httpRequest: HttpRequest\n  constructor(client: SanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Create a new dataset with the given name\n   *\n   * @param name - Name of the dataset to create\n   * @param options - Options for the dataset\n   */\n  create(name: string, options?: {aclMode?: DatasetAclMode}): Promise<DatasetResponse> {\n    return lastValueFrom(\n      _modify<DatasetResponse>(this.#client, this.#httpRequest, 'PUT', name, options)\n    )\n  }\n\n  /**\n   * Edit a dataset with the given name\n   *\n   * @param name - Name of the dataset to edit\n   * @param options - New options for the dataset\n   */\n  edit(name: string, options?: {aclMode?: DatasetAclMode}): Promise<DatasetResponse> {\n    return lastValueFrom(\n      _modify<DatasetResponse>(this.#client, this.#httpRequest, 'PATCH', name, options)\n    )\n  }\n\n  /**\n   * Delete a dataset with the given name\n   *\n   * @param name - Name of the dataset to delete\n   */\n  delete(name: string): Promise<{deleted: true}> {\n    return lastValueFrom(_modify<{deleted: true}>(this.#client, this.#httpRequest, 'DELETE', name))\n  }\n\n  /**\n   * Fetch a list of datasets for the configured project\n   */\n  list(): Promise<DatasetsResponse> {\n    return lastValueFrom(\n      _request<DatasetsResponse>(this.#client, this.#httpRequest, {uri: '/datasets'})\n    )\n  }\n}\n\nfunction _modify<R = unknown>(\n  client: SanityClient | ObservableSanityClient,\n  httpRequest: HttpRequest,\n  method: 'DELETE' | 'PATCH' | 'PUT',\n  name: string,\n  options?: {aclMode?: DatasetAclMode}\n) {\n  validate.dataset(name)\n  return _request<R>(client, httpRequest, {method, uri: `/datasets/${name}`, body: options})\n}\n","import {lastValueFrom, type Observable} from 'rxjs'\n\nimport {_request} from '../data/dataMethods'\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {HttpRequest, SanityProject} from '../types'\n\n/** @internal */\nexport class ObservableProjectsClient {\n  #client: ObservableSanityClient\n  #httpRequest: HttpRequest\n  constructor(client: ObservableSanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Fetch a list of projects the authenticated user has access to\n   */\n  list(): Observable<SanityProject[]> {\n    return _request<SanityProject[]>(this.#client, this.#httpRequest, {uri: '/projects'})\n  }\n\n  /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */\n  getById(projectId: string): Observable<SanityProject> {\n    return _request<SanityProject>(this.#client, this.#httpRequest, {uri: `/projects/${projectId}`})\n  }\n}\n\n/** @internal */\nexport class ProjectsClient {\n  #client: SanityClient\n  #httpRequest: HttpRequest\n  constructor(client: SanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Fetch a list of projects the authenticated user has access to\n   */\n  list(): Promise<SanityProject[]> {\n    return lastValueFrom(\n      _request<SanityProject[]>(this.#client, this.#httpRequest, {uri: '/projects'})\n    )\n  }\n\n  /**\n   * Fetch a project by project ID\n   *\n   * @param projectId - ID of the project to fetch\n   */\n  getById(projectId: string): Promise<SanityProject> {\n    return lastValueFrom(\n      _request<SanityProject>(this.#client, this.#httpRequest, {uri: `/projects/${projectId}`})\n    )\n  }\n}\n","import {lastValueFrom, type Observable} from 'rxjs'\n\nimport {_request} from '../data/dataMethods'\nimport type {ObservableSanityClient, SanityClient} from '../SanityClient'\nimport type {CurrentSanityUser, HttpRequest, SanityUser} from '../types'\n\n/** @public */\nexport class ObservableUsersClient {\n  #client: ObservableSanityClient\n  #httpRequest: HttpRequest\n  constructor(client: ObservableSanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  getById<T extends 'me' | string>(\n    id: T\n  ): Observable<T extends 'me' ? CurrentSanityUser : SanityUser> {\n    return _request<T extends 'me' ? CurrentSanityUser : SanityUser>(\n      this.#client,\n      this.#httpRequest,\n      {uri: `/users/${id}`}\n    )\n  }\n}\n\n/** @public */\nexport class UsersClient {\n  #client: SanityClient\n  #httpRequest: HttpRequest\n  constructor(client: SanityClient, httpRequest: HttpRequest) {\n    this.#client = client\n    this.#httpRequest = httpRequest\n  }\n\n  /**\n   * Fetch a user by user ID\n   *\n   * @param id - User ID of the user to fetch. If `me` is provided, a minimal response including the users role is returned.\n   */\n  getById<T extends 'me' | string>(\n    id: T\n  ): Promise<T extends 'me' ? CurrentSanityUser : SanityUser> {\n    return lastValueFrom(\n      _request<T extends 'me' ? CurrentSanityUser : SanityUser>(this.#client, this.#httpRequest, {\n        uri: `/users/${id}`,\n      })\n    )\n  }\n}\n","import {lastValueFrom, Observable} from 'rxjs'\n\nimport {AssetsClient, ObservableAssetsClient} from './assets/AssetsClient'\nimport {defaultConfig, initConfig} from './config'\nimport * as dataMethods from './data/dataMethods'\nimport {_listen} from './data/listen'\nimport {ObservablePatch, Patch} from './data/patch'\nimport {ObservableTransaction, Transaction} from './data/transaction'\nimport {DatasetsClient, ObservableDatasetsClient} from './datasets/DatasetsClient'\nimport {ObservableProjectsClient, ProjectsClient} from './projects/ProjectsClient'\nimport type {\n  AllDocumentIdsMutationOptions,\n  AllDocumentsMutationOptions,\n  Any,\n  BaseMutationOptions,\n  ClientConfig,\n  FilteredResponseQueryOptions,\n  FirstDocumentIdMutationOptions,\n  FirstDocumentMutationOptions,\n  HttpRequest,\n  IdentifiedSanityDocumentStub,\n  InitializedClientConfig,\n  MultipleMutationResult,\n  Mutation,\n  MutationSelection,\n  PatchOperations,\n  PatchSelection,\n  QueryParams,\n  RawQueryResponse,\n  RawRequestOptions,\n  SanityDocument,\n  SanityDocumentStub,\n  SingleMutationResult,\n  UnfilteredResponseQueryOptions,\n} from './types'\nimport {ObservableUsersClient, UsersClient} from './users/UsersClient'\n\nexport type {\n  _listen,\n  AssetsClient,\n  DatasetsClient,\n  ObservableAssetsClient,\n  ObservableDatasetsClient,\n  ObservableProjectsClient,\n  ObservableUsersClient,\n  ProjectsClient,\n  UsersClient,\n}\n\n/** @public */\nexport class ObservableSanityClient {\n  assets: ObservableAssetsClient\n  datasets: ObservableDatasetsClient\n  projects: ObservableProjectsClient\n  users: ObservableUsersClient\n\n  /**\n   * Private properties\n   */\n  #clientConfig: InitializedClientConfig\n  #httpRequest: HttpRequest\n\n  /**\n   * Instance properties\n   */\n  listen = _listen\n\n  constructor(httpRequest: HttpRequest, config: ClientConfig = defaultConfig) {\n    this.config(config)\n\n    this.#httpRequest = httpRequest\n\n    this.assets = new ObservableAssetsClient(this, this.#httpRequest)\n    this.datasets = new ObservableDatasetsClient(this, this.#httpRequest)\n    this.projects = new ObservableProjectsClient(this, this.#httpRequest)\n    this.users = new ObservableUsersClient(this, this.#httpRequest)\n  }\n\n  /**\n   * Clone the client - returns a new instance\n   */\n  clone(): ObservableSanityClient {\n    return new ObservableSanityClient(this.#httpRequest, this.config())\n  }\n\n  /**\n   * Returns the current client configuration\n   */\n  config(): InitializedClientConfig\n  /**\n   * Reconfigure the client. Note that this _mutates_ the current client.\n   */\n  config(newConfig?: Partial<ClientConfig>): this\n  config(newConfig?: Partial<ClientConfig>): ClientConfig | this {\n    if (newConfig === undefined) {\n      return {...this.#clientConfig}\n    }\n\n    if (this.#clientConfig && this.#clientConfig.allowReconfigure === false) {\n      throw new Error(\n        'Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client'\n      )\n    }\n\n    this.#clientConfig = initConfig(newConfig, this.#clientConfig || {})\n    return this\n  }\n\n  /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */\n  withConfig(newConfig?: Partial<ClientConfig>): ObservableSanityClient {\n    return new ObservableSanityClient(this.#httpRequest, {...this.config(), ...newConfig})\n  }\n\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   */\n  fetch<R = Any>(query: string): Observable<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Query parameters\n   */\n  fetch<R = Any, Q = QueryParams>(query: string, params: Q): Observable<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Query parameters\n   * @param options - Request options\n   */\n  fetch<R = Any, Q = QueryParams>(\n    query: string,\n    params: Q | undefined,\n    options: FilteredResponseQueryOptions\n  ): Observable<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Query parameters\n   * @param options - Request options\n   */\n  fetch<R = Any, Q = QueryParams>(\n    query: string,\n    params: Q | undefined,\n    options: UnfilteredResponseQueryOptions\n  ): Observable<RawQueryResponse<R>>\n  fetch<R, Q extends QueryParams>(\n    query: string,\n    params?: Q,\n    options: FilteredResponseQueryOptions | UnfilteredResponseQueryOptions = {}\n  ): Observable<RawQueryResponse<R> | R> {\n    return dataMethods._fetch<R, Q>(this, this.#httpRequest, query, params, options)\n  }\n\n  /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */\n  getDocument<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options?: {tag?: string}\n  ): Observable<SanityDocument<R> | undefined> {\n    return dataMethods._getDocument<R>(this, this.#httpRequest, id, options)\n  }\n\n  /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */\n  getDocuments<R extends Record<string, Any> = Record<string, Any>>(\n    ids: string[],\n    options?: {tag?: string}\n  ): Observable<(SanityDocument<R> | null)[]> {\n    return dataMethods._getDocuments<R>(this, this.#httpRequest, ids, options)\n  }\n\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns an observable that resolves to an array containing the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns an observable that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Observable<SingleMutationResult>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns an observable that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Observable<MultipleMutationResult>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return dataMethods._create<R>(this, this.#httpRequest, document, 'create', options)\n  }\n\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns an observable that resolves to an array containing the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns an observable that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Observable<SingleMutationResult>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns an observable that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Observable<MultipleMutationResult>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return dataMethods._createIfNotExists<R>(this, this.#httpRequest, document, options)\n  }\n\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns an observable that resolves to an array containing the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns an observable that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Observable<SingleMutationResult>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns an observable that resolves to a mutation result object containing the created document ID.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Observable<MultipleMutationResult>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns an observable that resolves to the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return dataMethods._createOrReplace<R>(this, this.#httpRequest, document, options)\n  }\n\n  /**\n   * Deletes a document with the given document ID.\n   * Returns an observable that resolves to the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns an observable that resolves to an array containing the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns an observable that resolves to a mutation result object containing the deleted document ID.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete(id: string, options: FirstDocumentIdMutationOptions): Observable<SingleMutationResult>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns an observable that resolves to a mutation result object containing the deleted document ID.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete(id: string, options: AllDocumentIdsMutationOptions): Observable<MultipleMutationResult>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns an observable that resolves to the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns an observable that resolves to first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns an observable that resolves to an array containing the deleted documents.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns an observable that resolves to a mutation result object containing the ID of the first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete(\n    selection: MutationSelection,\n    options: FirstDocumentIdMutationOptions\n  ): Observable<SingleMutationResult>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns an observable that resolves to a mutation result object containing the document IDs that were deleted.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete(\n    selection: MutationSelection,\n    options: AllDocumentIdsMutationOptions\n  ): Observable<MultipleMutationResult>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns an observable that resolves to first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: string | MutationSelection,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return dataMethods._delete<R>(this, this.#httpRequest, selection, options)\n  }\n\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns an observable that resolves to the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options: FirstDocumentMutationOptions\n  ): Observable<SanityDocument<R>>\n  /**\n   * Perform mutation operations against the configured dataset.\n   * Returns an observable that resolves to an array of the mutated documents.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options: AllDocumentsMutationOptions\n  ): Observable<SanityDocument<R>[]>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns an observable that resolves to a mutation result object containing the document ID of the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options: FirstDocumentIdMutationOptions\n  ): Observable<SingleMutationResult>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns an observable that resolves to a mutation result object containing the mutated document IDs.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options: AllDocumentIdsMutationOptions\n  ): Observable<MultipleMutationResult>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns an observable that resolves to the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options?: BaseMutationOptions\n  ): Observable<SanityDocument<R>>\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | ObservablePatch | ObservableTransaction,\n    options?:\n      | FirstDocumentMutationOptions\n      | AllDocumentsMutationOptions\n      | FirstDocumentIdMutationOptions\n      | AllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Observable<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return dataMethods._mutate<R>(this, this.#httpRequest, operations, options)\n  }\n\n  /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param documentId - Document ID(s) to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   */\n  patch(documentId: PatchSelection, operations?: PatchOperations): ObservablePatch {\n    return new ObservablePatch(documentId, operations, this)\n  }\n\n  /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */\n  transaction<R extends Record<string, Any> = Record<string, Any>>(\n    operations?: Mutation<R>[]\n  ): ObservableTransaction {\n    return new ObservableTransaction(operations, this)\n  }\n\n  /**\n   * DEPRECATED: Perform an HTTP request against the Sanity API\n   *\n   * @deprecated Use your own request library!\n   * @param options - Request options\n   */\n  request<R = Any>(options: RawRequestOptions): Observable<R> {\n    return dataMethods._request(this, this.#httpRequest, options)\n  }\n\n  /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */\n  getUrl(uri: string, canUseCdn?: boolean): string {\n    return dataMethods._getUrl(this, uri, canUseCdn)\n  }\n\n  /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */\n  getDataUrl(operation: string, path?: string): string {\n    return dataMethods._getDataUrl(this, operation, path)\n  }\n}\n\n/** @public */\nexport class SanityClient {\n  assets: AssetsClient\n  datasets: DatasetsClient\n  projects: ProjectsClient\n  users: UsersClient\n\n  /**\n   * Observable version of the Sanity client, with the same configuration as the promise-based one\n   */\n  observable: ObservableSanityClient\n\n  /**\n   * Private properties\n   */\n  #clientConfig: InitializedClientConfig\n  #httpRequest: HttpRequest\n\n  /**\n   * Instance properties\n   */\n  listen = _listen\n\n  constructor(httpRequest: HttpRequest, config: ClientConfig = defaultConfig) {\n    this.config(config)\n\n    this.#httpRequest = httpRequest\n\n    this.assets = new AssetsClient(this, this.#httpRequest)\n    this.datasets = new DatasetsClient(this, this.#httpRequest)\n    this.projects = new ProjectsClient(this, this.#httpRequest)\n    this.users = new UsersClient(this, this.#httpRequest)\n\n    this.observable = new ObservableSanityClient(httpRequest, config)\n  }\n\n  /**\n   * Clone the client - returns a new instance\n   */\n  clone(): SanityClient {\n    return new SanityClient(this.#httpRequest, this.config())\n  }\n\n  /**\n   * Returns the current client configuration\n   */\n  config(): InitializedClientConfig\n  /**\n   * Reconfigure the client. Note that this _mutates_ the current client.\n   */\n  config(newConfig?: Partial<ClientConfig>): this\n  config(newConfig?: Partial<ClientConfig>): ClientConfig | this {\n    if (newConfig === undefined) {\n      return {...this.#clientConfig}\n    }\n\n    if (this.#clientConfig && this.#clientConfig.allowReconfigure === false) {\n      throw new Error(\n        'Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client'\n      )\n    }\n\n    if (this.observable) {\n      this.observable.config(newConfig)\n    }\n\n    this.#clientConfig = initConfig(newConfig, this.#clientConfig || {})\n    return this\n  }\n\n  /**\n   * Clone the client with a new (partial) configuration.\n   *\n   * @param newConfig - New client configuration properties, shallowly merged with existing configuration\n   */\n  withConfig(newConfig?: Partial<ClientConfig>): SanityClient {\n    return new SanityClient(this.#httpRequest, {...this.config(), ...newConfig})\n  }\n\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   */\n  fetch<R = Any>(query: string): Promise<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Optional query parameters\n   */\n  fetch<R = Any, Q = QueryParams>(query: string, params: Q): Promise<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Optional query parameters\n   * @param options - Request options\n   */\n  fetch<R = Any, Q = QueryParams>(\n    query: string,\n    params: Q | undefined,\n    options: FilteredResponseQueryOptions\n  ): Promise<R>\n  /**\n   * Perform a GROQ-query against the configured dataset.\n   *\n   * @param query - GROQ-query to perform\n   * @param params - Optional query parameters\n   * @param options - Request options\n   */\n  fetch<R = Any, Q = QueryParams>(\n    query: string,\n    params: Q | undefined,\n    options: UnfilteredResponseQueryOptions\n  ): Promise<RawQueryResponse<R>>\n  fetch<R, Q extends QueryParams>(\n    query: string,\n    params?: Q,\n    options: FilteredResponseQueryOptions | UnfilteredResponseQueryOptions = {}\n  ): Promise<RawQueryResponse<R> | R> {\n    return lastValueFrom(dataMethods._fetch<R, Q>(this, this.#httpRequest, query, params, options))\n  }\n\n  /**\n   * Fetch a single document with the given ID.\n   *\n   * @param id - Document ID to fetch\n   * @param options - Request options\n   */\n  getDocument<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options?: {tag?: string}\n  ): Promise<SanityDocument<R> | undefined> {\n    return lastValueFrom(dataMethods._getDocument<R>(this, this.#httpRequest, id, options))\n  }\n\n  /**\n   * Fetch multiple documents in one request.\n   * Should be used sparingly - performing a query is usually a better option.\n   * The order/position of documents is preserved based on the original array of IDs.\n   * If any of the documents are missing, they will be replaced by a `null` entry in the returned array\n   *\n   * @param ids - Document IDs to fetch\n   * @param options - Request options\n   */\n  getDocuments<R extends Record<string, Any> = Record<string, Any>>(\n    ids: string[],\n    options?: {tag?: string}\n  ): Promise<(SanityDocument<R> | null)[]> {\n    return lastValueFrom(dataMethods._getDocuments<R>(this, this.#httpRequest, ids, options))\n  }\n\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns a promise that resolves to an array containing the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns a promise that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Promise<SingleMutationResult>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns a promise that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Promise<MultipleMutationResult>\n  /**\n   * Create a document. Requires a `_type` property. If no `_id` is provided, it will be generated by the database.\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  create<R extends Record<string, Any> = Record<string, Any>>(\n    document: SanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return lastValueFrom(\n      dataMethods._create<R>(this, this.#httpRequest, document, 'create', options)\n    )\n  }\n\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns a promise that resolves to an array containing the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns a promise that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Promise<SingleMutationResult>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns a promise that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Promise<MultipleMutationResult>\n  /**\n   * Create a document if no document with the same ID already exists.\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to create\n   * @param options - Mutation options\n   */\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  createIfNotExists<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return lastValueFrom(\n      dataMethods._createIfNotExists<R>(this, this.#httpRequest, document, options)\n    )\n  }\n\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns a promise that resolves to an array containing the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns a promise that resolves to a mutation result object containing the ID of the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: FirstDocumentIdMutationOptions\n  ): Promise<SingleMutationResult>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns a promise that resolves to a mutation result object containing the created document ID.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options: AllDocumentIdsMutationOptions\n  ): Promise<MultipleMutationResult>\n  /**\n   * Create a document if it does not exist, or replace a document with the same document ID\n   * Returns a promise that resolves to the created document.\n   *\n   * @param document - Document to either create or replace\n   * @param options - Mutation options\n   */\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  createOrReplace<R extends Record<string, Any> = Record<string, Any>>(\n    document: IdentifiedSanityDocumentStub<R>,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return lastValueFrom(\n      dataMethods._createOrReplace<R>(this, this.#httpRequest, document, options)\n    )\n  }\n\n  /**\n   * Deletes a document with the given document ID.\n   * Returns a promise that resolves to the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns a promise that resolves to an array containing the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns a promise that resolves to a mutation result object containing the deleted document ID.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete(id: string, options: FirstDocumentIdMutationOptions): Promise<SingleMutationResult>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns a promise that resolves to a mutation result object containing the deleted document ID.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete(id: string, options: AllDocumentIdsMutationOptions): Promise<MultipleMutationResult>\n  /**\n   * Deletes a document with the given document ID.\n   * Returns a promise that resolves to the deleted document.\n   *\n   * @param id - Document ID to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    id: string,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns a promise that resolves to first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns a promise that resolves to an array containing the deleted documents.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns a promise that resolves to a mutation result object containing the ID of the first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete(\n    selection: MutationSelection,\n    options: FirstDocumentIdMutationOptions\n  ): Promise<SingleMutationResult>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns a promise that resolves to a mutation result object containing the document IDs that were deleted.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete(\n    selection: MutationSelection,\n    options: AllDocumentIdsMutationOptions\n  ): Promise<MultipleMutationResult>\n  /**\n   * Deletes one or more documents matching the given query or document ID.\n   * Returns a promise that resolves to first deleted document.\n   *\n   * @param selection - An object with either an `id` or `query` key defining what to delete\n   * @param options - Options for the mutation\n   */\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: MutationSelection,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  delete<R extends Record<string, Any> = Record<string, Any>>(\n    selection: string | MutationSelection,\n    options?:\n      | AllDocumentIdsMutationOptions\n      | AllDocumentsMutationOptions\n      | BaseMutationOptions\n      | FirstDocumentIdMutationOptions\n      | FirstDocumentMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return lastValueFrom(dataMethods._delete<R>(this, this.#httpRequest, selection, options))\n  }\n\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns a promise that resolves to the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options: FirstDocumentMutationOptions\n  ): Promise<SanityDocument<R>>\n  /**\n   * Perform mutation operations against the configured dataset.\n   * Returns a promise that resolves to an array of the mutated documents.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options: AllDocumentsMutationOptions\n  ): Promise<SanityDocument<R>[]>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns a promise that resolves to a mutation result object containing the document ID of the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options: FirstDocumentIdMutationOptions\n  ): Promise<SingleMutationResult>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns a promise that resolves to a mutation result object containing the mutated document IDs.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options: AllDocumentIdsMutationOptions\n  ): Promise<MultipleMutationResult>\n  /**\n   * Perform mutation operations against the configured dataset\n   * Returns a promise that resolves to the first mutated document.\n   *\n   * @param operations - Mutation operations to execute\n   * @param options - Mutation options\n   */\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options?: BaseMutationOptions\n  ): Promise<SanityDocument<R>>\n  mutate<R extends Record<string, Any> = Record<string, Any>>(\n    operations: Mutation<R>[] | Patch | Transaction,\n    options?:\n      | FirstDocumentMutationOptions\n      | AllDocumentsMutationOptions\n      | FirstDocumentIdMutationOptions\n      | AllDocumentIdsMutationOptions\n      | BaseMutationOptions\n  ): Promise<\n    SanityDocument<R> | SanityDocument<R>[] | SingleMutationResult | MultipleMutationResult\n  > {\n    return lastValueFrom(dataMethods._mutate<R>(this, this.#httpRequest, operations, options))\n  }\n\n  /**\n   * Create a new buildable patch of operations to perform\n   *\n   * @param documentId - Document ID(s)to patch\n   * @param operations - Optional object of patch operations to initialize the patch instance with\n   */\n  patch(documentId: PatchSelection, operations?: PatchOperations): Patch {\n    return new Patch(documentId, operations, this)\n  }\n\n  /**\n   * Create a new transaction of mutations\n   *\n   * @param operations - Optional array of mutation operations to initialize the transaction instance with\n   */\n  transaction<R extends Record<string, Any> = Record<string, Any>>(\n    operations?: Mutation<R>[]\n  ): Transaction {\n    return new Transaction(operations, this)\n  }\n\n  /**\n   * Perform a request against the Sanity API\n   * NOTE: Only use this for Sanity API endpoints, not for your own APIs!\n   *\n   * @param options - Request options\n   * @returns Promise resolving to the response body\n   */\n  request<R = Any>(options: RawRequestOptions): Promise<R> {\n    return lastValueFrom(dataMethods._request<R>(this, this.#httpRequest, options))\n  }\n\n  /**\n   * Perform an HTTP request a `/data` sub-endpoint\n   * NOTE: Considered internal, thus marked as deprecated. Use `request` instead.\n   *\n   * @deprecated - Use `request()` or your own HTTP library instead\n   * @param endpoint - Endpoint to hit (mutate, query etc)\n   * @param body - Request body\n   * @param options - Request options\n   * @internal\n   */\n  dataRequest(endpoint: string, body: unknown, options?: BaseMutationOptions): Promise<Any> {\n    return lastValueFrom(dataMethods._dataRequest(this, this.#httpRequest, endpoint, body, options))\n  }\n\n  /**\n   * Get a Sanity API URL for the URI provided\n   *\n   * @param uri - URI/path to build URL for\n   * @param canUseCdn - Whether or not to allow using the API CDN for this route\n   */\n  getUrl(uri: string, canUseCdn?: boolean): string {\n    return dataMethods._getUrl(this, uri, canUseCdn)\n  }\n\n  /**\n   * Get a Sanity API URL for the data operation and path provided\n   *\n   * @param operation - Data operation (eg `query`, `mutate`, `listen` or similar)\n   * @param path - Path to append after the operation\n   */\n  getDataUrl(operation: string, path?: string): string {\n    return dataMethods._getDataUrl(this, operation, path)\n  }\n}\n","import envMiddleware from './http/browserMiddleware'\nimport {defineHttpRequest} from './http/request'\nimport {SanityClient} from './SanityClient'\nimport type {ClientConfig} from './types'\nimport {printNoDefaultExport} from './warnings'\n\nexport * from './data/patch'\nexport * from './data/transaction'\nexport {ClientError, ServerError} from './http/errors'\nexport * from './SanityClient'\nexport * from './types'\n\n// Set the http client to use for requests, and its environment specific middleware\nconst httpRequest = defineHttpRequest(envMiddleware, {})\n/** @public */\nexport const requester = httpRequest.defaultRequester\n\n/** @public */\nexport const createClient = (config: ClientConfig) =>\n  new SanityClient(\n    defineHttpRequest(envMiddleware, {\n      maxRetries: config.maxRetries,\n      retryDelay: config.retryDelay,\n    }),\n    config\n  )\n\n/**\n * @public\n * @deprecated Use the named export `createClient` instead of the `default` export\n */\nexport default function deprecatedCreateClient(config: ClientConfig) {\n  printNoDefaultExport()\n  return new SanityClient(httpRequest, config)\n}\n\n/** @alpha */\nexport {adapter as unstable__adapter, environment as unstable__environment} from 'get-it'\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}